const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["context-slice-graphql-DK0M30gM-m3r.js","common-OtdNV_G5WD6J.js","assets/common-DwC2WtDTcwkj.css","context-slice-extensibility-CxSUM1o4um0q.js","router-Do4zJJAEDTya.js","loaders-common-BJwpilNWqKA5.js","context-slice-atlas-D7ri7RsvNajt.js","context-slice-newReportify-mLZLEwvbKmHv.js","context-slice-metrics-bIURNZ-g2jup.js","context-slice-manifestFetch-DadUzXsMT7kh.js","context-slice-sidekick~index-GICUqrVg606C.js","render-common-hx9BPWdZF4r4.js","assets/render-common-DXNa-nnUYVRs.css"])))=>i.map(i=>d[i]);
var Na=Object.defineProperty;var Pn=n=>{throw TypeError(n)};var ka=(n,e,r)=>e in n?Na(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r;var G=(n,e,r)=>ka(n,typeof e!="symbol"?e+"":e,r),Tn=(n,e,r)=>e.has(n)||Pn("Cannot "+r);var te=(n,e,r)=>(Tn(n,e,"read from private field"),r?r.call(n):e.get(n)),Ye=(n,e,r)=>e.has(n)?Pn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,r);var Ge=(n,e,r)=>(Tn(n,e,"access private method"),r);import{L as Gt,c1 as ye,a as K,c2 as Ra,c3 as ee,c4 as Oa,c5 as Da,c6 as Yn,M as J,_ as ue,c7 as z,c8 as Ma,c9 as Fe,O as Zn,ca as Fa,$ as xa,cb as qa,cc as Ua,cd as $a,ce as Ba,cf as Va,a0 as Ln,ac as Dt,cg as Cn,al as er,a2 as Ga,ch as Ha,ae as U,ci as za,cj as tr,o as ja,G as Qa,q as Ka,ck as Wa,cl as Mt,a3 as Ht,cm as Xa,m as Nn,Y as Ja,u as Ya,p as Q,C as nr,cn as Za,co as ei,cp as ti,cq as ni,cr as lt,l as rr,cs as ar,a1 as ri,P as Ke,N as ai,y as ir,ct as ii,W as si,B as kn,cu as zt,T as Ft,I as oi,cv as ui,cw as ci,cx as li,cy as di,cz as fi,cA as pi,cB as gi,cC as sr,cD as hi,cE as Re,b5 as mi,cF as vi,cG as or,cH as yi,cI as _i,cJ as Si,cK as Ei,cL as bi,cM as Ai,cN as wi,cO as Ii,cP as Pi,cQ as Ti,cR as Li,cS as Ue,aW as ur,cT as cr,aj as oe,cU as je,ak as X,by as xt,ai as qe,cV as ve,cW as Ci,bN as Ni,cX as Rn,cY as ki,cZ as Ze,c_ as Ri,c$ as Oi,d0 as On,d1 as Di,d2 as Mi,d3 as Fi,d4 as qt,d5 as xi,d6 as qi,z as Ui,d7 as $i,d8 as Bi,d9 as Vi,da as lr,db as ut,dc as dr,dd as fr,de as Dn,df as Gi,dg as Hi,dh as zi,di as ji,dj as Qi,dk as Ki,dl as Wi,dm as Xi,dn as Ji,dp as Yi,dq as Zi,J as es,Q as ts,dr as Mn,ds as ns,dt as rs,du as pr}from"../common-OtdNV_G5WD6J.js";if(typeof window<"u"){String.prototype.replaceAll||(String.prototype.replaceAll=function(e,r){let a=this;for(;a!==(a=a.replace(e,r)););return a}),String.prototype.at||(String.prototype.at=function(e){return this.slice(e,e+1)}),self.setImmediate||(self.setImmediate=setTimeout,self.clearImmediate=clearTimeout),self.requestIdleCallback||(self.requestIdleCallback=setTimeout,self.cancelIdleCallback=clearTimeout),Object.hasOwn||(Object.hasOwn=Function.prototype.call.bind(Object.prototype.hasOwnProperty)),String.prototype.matchAll||(String.prototype.matchAll=function(e){const r=new RegExp(e,e.flags||"g");let a;const i=[];for(;a=r.exec(this);)i.push(a);return i}),Array.prototype.at||(Array.prototype.at=function(e){return e<0&&(e+=this.length),this[e]});const n=Object.getPrototypeOf(Uint8Array.prototype);n.at||(n.at=function(e){return e<0&&(e+=this.length),this[e]}),Promise.any||(Promise.any=function(e){return new Promise((r,a)=>{let i=0,u;function l(f){u=u||f,--i||a(u)}for(const f of e)Promise.resolve(f,++i).then(r,l)})}),URL.parse||(URL.parse=(e,r)=>{try{return new URL(String(e),r===void 0?void 0:String(r))}catch{return null}}),URL.canParse||(URL.canParse=(e,r)=>URL.parse(e,r)!=null)}const as=console.error.bind(console),is=console.warn.bind(console),gr=[/this component is not accepted by Hot Loader/,/Report not sent due to releaseStage/];console.error=(...n)=>{const[e,r]=n;typeof e=="string"&&gr.some(a=>a.test(e))||typeof e=="string"&&/React does not recognize/.test(e)&&r==="testID"||as(...n)};console.warn=(...n)=>{const[e]=n;typeof e=="string"&&gr.some(r=>r.test(e))||is(...n)};var Jn;if(typeof Node=="function"&&Node.prototype){const n=(Jn=Object.getOwnPropertyDescriptor(Node.prototype,"parentNode"))==null?void 0:Jn.get,e=Node.prototype.removeChild;Node.prototype.removeChild=function(a){return(n==null?void 0:n.call(a))!==this?a:e.apply(this,Array.from(arguments))};const r=Node.prototype.insertBefore;Node.prototype.insertBefore=function(a,i){return i&&(n==null?void 0:n.call(i))!==this?a:r.apply(this,Array.from(arguments))}}const Fn="https://web-sourcemaps.shopify.io/";(async()=>{if(Gt().isShopifyStaff)try{if(!(await fetch(Fn,{credentials:"include"})).ok)throw new Error("not authenticated with source map service")}catch{console.log("%cShopify Developers","font-size: 16px; font-weight: bold; color: #96bf48;"),console.log(["To debug in production, please authenticate with the source map service",`%cAuth: ${Fn}`,"Docs: https://github.com/Shopify/web-sourcemaps/blob/main/README.md"].join(`

`),"font-weight: bold;")}})();const ss=["_ga_B7X5MKCR35","_ga_T4PE06PPP4","_ga_W6NECZNE63","_ga_CKDXSSPLPF","_ga_910K5QNNZS"];function os(){for(const n of Object.keys(ye.get()))n.startsWith("_ga_")&&!ss.includes(n)&&ye.remove(n,{path:"/",domain:".shopify.com"})}setTimeout(os,0);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const l of u.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(i){if(i.ep)return;i.ep=!0;const u=r(i);fetch(i.href,u)}})();class us extends Oa{lifecycleEvent(e){if(e.type!==Da.TimeToLastByte)return super.lifecycleEvent(e)}}const cs=K(({ensure:n,registerCleanup:e})=>new us(a=>{let i;n(["router"]).then(({router:u})=>{const l=u.subscribe(f=>{f.navigation.state==="loading"&&i!==f.navigation.location.pathname&&(i=f.navigation.location.pathname,a.start({target:i}))});e(()=>{l()})}).catch(u=>{throw u}),a.on("navigation",async u=>{if(u.result!==Ra.Finished)return;const l=Math.max(0,performance.now()-u.timeToComplete);ee("navigation_usable",{start:l,duration:u.timeToUsable}),ee("navigation_complete",{start:l,duration:u.timeToComplete})})}));function ls({routeTimings:n,navigationStartAt:e,matches:r}){return Array.from(n.entries()).map(([a,i])=>{const u=ds({routeId:a,timings:i,navigationStartAt:e,matches:r});return Object.keys(u).length>0?u:null}).filter(a=>a!==null)}function ds({routeId:n,timings:e,navigationStartAt:r,matches:a}){let i=(a==null?void 0:a.some(u=>u.route.id===n))??!0;return(a==null?void 0:a.length)===0&&(i=!0),Object.fromEntries(Object.entries(e).filter(([u,l])=>fs(u,l,r,i)))}function fs(n,e,r,a){return(e==null?void 0:e.start)===void 0?!1:e.end===void 0||n==="prefetch"||e.start<r&&e.end>=r?a:e.start>=r&&e.end>=r}const ps=[Zn,Fa,xa,qa,Yn],xn="data-layout-shift-ignore",gs="admin-performance-debug-enabled";function qn(){return typeof window<"u"&&er(gs)}class hs{constructor(e){G(this,"ensure");G(this,"initTime",performance.now());G(this,"observer",null);G(this,"skipPageStableMetricsEmission",!1);G(this,"pageLoadComplete",!1);G(this,"navigationStartAt",0);G(this,"intervalId");G(this,"routerStates",[]);G(this,"isUserInputDetected",!1);G(this,"redirectNavigationStartAt");G(this,"loadingEndAt");G(this,"pageStableAt");G(this,"routerLoadersStartAt");G(this,"routerLoadersEndAt");G(this,"navigationContext",{});G(this,"queryRevalidationTime");G(this,"entryCollection",{});G(this,"pageInteractiveIntervalId");G(this,"pageInteractiveAt");G(this,"pageStableDurationListeners",[]);G(this,"pageLoaderDurationListeners",[]);G(this,"pageInteractiveDurationListeners",[]);G(this,"routeTimings",new Map);G(this,"visitedRoutes",new Set);G(this,"flagLabelCache",null);G(this,"_isIdle",!1);G(this,"idlePromise",null);G(this,"idlePromiseResolve",null);G(this,"errorState",null);G(this,"debugVisualizer",null);G(this,"pendingCacheAndNetworkQueries",new Map);G(this,"dirtyQueryCompletionTimes",[]);G(this,"userInputListener",null);G(this,"hasEmittedPageStable",!1);G(this,"hasEmittedPageInteractive",!1);this.ensure=e,this.recordAdminLoadedMetric(),this.reset()}get isIdle(){return this._isIdle}get isFullPageNavigation(){return this.navigationStartAt===0}get isObservingNavigation(){return this.observer!==null}async waitUntilIdle(){if(!this._isIdle)return this.idlePromise||(this.idlePromise=new Promise(e=>{this.idlePromiseResolve=e})),this.idlePromise}async reset(e=0,r){const{flags:a}=await this.ensure(["flags"]);if(a.get(Yn)){if(this.isObservingNavigation){const u=this.snapshotNavigationState();this.emitCancelledNavigationMetrics(u)}this.navigationStartAt=e}else this.navigationStartAt=e,await this.checkForInterruptedNavigation();this.cleanup(),r&&this.routerStates.push(r),this.checkNavigationComplete(),this.checkStableInteractive(),this.resetPerformanceObserver(),this.setupUserInputDetection(),this.logToDebugVisualizer("navigationStart")}addRouteTimings(e,r,a,i){this.routeTimings.has(e)||this.routeTimings.set(e,{});const u=this.routeTimings.get(e);u&&!u[r]&&(u[r]={start:a,end:i})}redirect(e){this.routerStates.push(e),this.redirectNavigationStartAt||(this.redirectNavigationStartAt=performance.now())}setSkipPageStableMetricsEmission(e){this.skipPageStableMetricsEmission=e}setNavigationContext(e){this.navigationContext={...this.navigationContext,...e}}loadingFinished(){this.loadingEndAt||(this.loadingEndAt=performance.now())}addPageStableDurationListener(e){this.pageStableDurationListeners.push(e),e(this.pageStableDuration)}removePageStableDurationListener(e){this.pageStableDurationListeners=this.pageStableDurationListeners.filter(r=>r!==e)}addPageLoaderDurationListener(e){this.pageLoaderDurationListeners.push(e),e(this.pageLoaderDuration)}removePageLoaderDurationListener(e){this.pageLoaderDurationListeners=this.pageLoaderDurationListeners.filter(r=>r!==e)}addPageInteractiveDurationListener(e){this.pageInteractiveDurationListeners.push(e),e(this.pageInteractiveDuration)}removePageInteractiveDurationListener(e){this.pageInteractiveDurationListeners=this.pageInteractiveDurationListeners.filter(r=>r!==e)}markPageViewError(e){e<400||(this.errorState={statusCode:e})}setPageViewErrorReported(e){this.errorState&&(this.errorState.errorReported=e)}setReactLoadersMarkers(e,r){typeof this.routerLoadersStartAt>"u"&&typeof this.routerLoadersEndAt>"u"&&(this.routerLoadersStartAt=e,this.routerLoadersEndAt=r,this.pageLoaderDurationListeners.forEach(a=>a(this.pageLoaderDuration)),this.routerLoadersEndAt&&this.logToDebugVisualizer("loaderCompletion",this.routerLoadersEndAt-this.navigationStartAt))}setQueryRevalidation(e){this.queryRevalidationTime=e}addPendingCacheAndNetworkQuery(e,r,a,i){const u=performance.now();this.pendingCacheAndNetworkQueries.set(e,{queryId:e,startTime:u,pathId:r,operationName:a,targetRouteInfo:i}),this.logToDebugVisualizer("pendingGraphql","add")}async completeCacheAndNetworkQuery(e,r){var A;const a=this.pendingCacheAndNetworkQueries.get(e);if(!a){const S=performance.now(),E=S-this.navigationStartAt;r&&E>0&&E<3e4&&this.dirtyQueryCompletionTimes.push(S),E>0&&E<3e4&&this.logToDebugVisualizer("cacheNetworkQuery",r,E),this.logToDebugVisualizer("pendingGraphql","complete");return}const i=performance.now(),u=i-this.navigationStartAt,l=Math.round(i-a.startTime),f=a.operationName??"unknown";r&&this.dirtyQueryCompletionTimes.push(i);const h=`cache-network(${f})[${r?"changed":"unchanged"}]`;ee(h,{start:a.startTime,end:i});const{metrics:v}=await this.ensure(["metrics"]),y=((A=a.targetRouteInfo)==null?void 0:A.pathPattern)??this.navigationContext.normalizedPathname??"unknown";v.record(J.GraphQlCacheAndNetworkDuration,l,{normalizedPathname:y,isChanged:r,operationName:f}),this.logToDebugVisualizer("cacheNetworkQuery",r,u),this.pendingCacheAndNetworkQueries.delete(e),this.logToDebugVisualizer("pendingGraphql","complete")}hasPendingCacheAndNetworkQueries(){return this.pendingCacheAndNetworkQueries.size>0}getPendingCacheAndNetworkQueriesCount(){return this.pendingCacheAndNetworkQueries.size}async ensureDebugVisualizer(){if(!qn())return null;if(!this.debugVisualizer){const{PerformanceDebugVisualizer:e}=await ue(async()=>{const{PerformanceDebugVisualizer:r}=await import("../context-slice-PerformanceDebugVisualizer-Bpip9YUbNAQ7.js");return{PerformanceDebugVisualizer:r}},[]);this.debugVisualizer=new e(!0)}return this.debugVisualizer}logToDebugVisualizer(e,...r){qn()&&this.ensureDebugVisualizer().then(a=>{if(a)switch(e){case"navigationStart":{a.updateNavigationStartTime(this.navigationStartAt),a.enable();break}case"loaderCompletion":{const[i]=r;a.updateLoaderCompletionTime(i);break}case"cacheNetworkQuery":{const[i,u]=r;a.addCacheNetworkQuery(i,u);break}case"pageStable":{const[i]=r;a.updatePageStable(i);break}case"finalPageStable":{const[i]=r;a.updateFinalPageStable(i);break}case"tti":{const[i,u]=r;a.updateTTI(i),a.updateLoaderCompletionTime(u);break}case"longTask":{const[i]=r;a.addLongTask(i);break}case"layoutShift":{const[i]=r;a.addLayoutShift(i);break}case"pendingGraphql":{const[i]=r;i==="add"?a.addPendingGraphqlQuery():i==="complete"?a.completePendingGraphqlQuery():i==="reset"&&a.resetPendingGraphqlQueries();break}}}).catch(()=>{})}get pageViewStatusCode(){var e;return((e=this.errorState)==null?void 0:e.statusCode)??200}get pageStableDuration(){if(this.pageStableAt)return this.pageStableAt-this.navigationStartAt}get pageLoaderDuration(){let e;typeof this.prefetchingEndAt<"u"&&typeof this.prefetchingStartAt<"u"&&(e=this.prefetchingEndAt-this.prefetchingStartAt);let r;return typeof this.routerLoadersStartAt<"u"&&typeof this.routerLoadersEndAt<"u"&&(r=this.routerLoadersEndAt-this.routerLoadersStartAt),e??r}get pageInteractiveDuration(){if(this.pageInteractiveAt)return this.pageInteractiveAt-this.navigationStartAt}get prefetchingStartAt(){var r;let e=1/0;for(const a of this.routeTimings.values())(r=a.prefetch)!=null&&r.start&&(e=Math.min(e,a.prefetch.start));return e===1/0?void 0:e}get prefetchingEndAt(){var r;let e=0;for(const a of this.routeTimings.values())(r=a.prefetch)!=null&&r.end&&(e=Math.max(e,a.prefetch.end));return e===0?void 0:e}get aggregateLoaderDuration(){const e=this.navigationContext.matches,r=ls({routeTimings:this.routeTimings,navigationStartAt:this.navigationStartAt,matches:e});if(r.length===0)return;const a=r.flatMap(u=>{var l,f,h,v;return[(l=u.componentAssets)==null?void 0:l.start,(f=u.loaderAssets)==null?void 0:f.start,((h=u.prefetch)==null?void 0:h.start)??((v=u.loader)==null?void 0:v.start)].filter(Boolean)}),i=r.flatMap(u=>{var l,f,h,v;return[(l=u.componentAssets)==null?void 0:l.end,(f=u.loaderAssets)==null?void 0:f.end,((h=u.prefetch)==null?void 0:h.end)??((v=u.loader)==null?void 0:v.end)].filter(Boolean)});if(!(a.length===0||i.length===0))return{start:Math.min(...a,this.routerLoadersStartAt??1/0),end:Math.max(...i)}}get navigationStart(){return z(this.navigationStartAt)}snapshotNavigationState(){return{navigationStartAt:this.navigationStartAt,loadingEndAt:this.loadingEndAt,pageStableAt:this.pageStableAt,pageInteractiveAt:this.pageInteractiveAt,routerLoadersStartAt:this.routerLoadersStartAt,routerLoadersEndAt:this.routerLoadersEndAt,prefetchingStartAt:this.prefetchingStartAt,prefetchingEndAt:this.prefetchingEndAt,redirectNavigationStartAt:this.redirectNavigationStartAt,firstRedirectRouterState:this.firstRedirectRouterState,routerStates:[...this.routerStates],navigationContext:{...this.navigationContext},errorState:this.errorState?{...this.errorState}:null,isUserInputDetected:this.isUserInputDetected,routeTimings:new Map(this.routeTimings),pageLoadComplete:this.pageLoadComplete,browserBackgroundedAt:this.browserBackgroundedAt,aggregateLoaderDuration:this.aggregateLoaderDuration}}getPageStableCandidate(){const e=this.getLastPerformanceEntry(this.entryCollection.graphqlQueries),r=this.getLastPerformanceEntry(this.entryCollection.images),a=this.getLastPerformanceEntry(this.entryCollection.scripts),i=this.getLastPerformanceEntry(this.entryCollection.layoutShift),u=Ma([e,r,a],i),l=Fe(u)?u.responseEnd:(u==null?void 0:u.startTime)??0;return this.loadingEndAt?Math.max(l,this.loadingEndAt):l}get browserBackgroundedAt(){var e,r;return(r=(e=this.entryCollection.visibilityState)==null?void 0:e.filter(a=>a.name==="hidden")[0])==null?void 0:r.startTime}get firstRedirectRouterState(){return this.routerStates.filter(e=>{var r,a;return(a=(r=e.navigation.location)==null?void 0:r.state)==null?void 0:a._isRedirect})[0]}get delayMetrics(){const r=Math.max(this.initTime,this.navigationStartAt);return performance.now()-r<2500}cleanup(){this.pageLoadComplete=!1,clearInterval(this.intervalId),this.entryCollection={},this.routerStates=[],this.isUserInputDetected=!1,this.redirectNavigationStartAt=void 0,this.loadingEndAt=void 0,this.navigationContext={},this.queryRevalidationTime=void 0,this.routerLoadersStartAt=void 0,this.routerLoadersEndAt=void 0,this.pageStableDurationListeners.forEach(e=>e()),this.pageLoaderDurationListeners.forEach(e=>e()),this.pageInteractiveDurationListeners.forEach(e=>e()),this.errorState=null,this._isIdle=!1,this.idlePromise=null,this.idlePromiseResolve=null,clearInterval(this.pageInteractiveIntervalId),this.pageInteractiveAt=void 0,this.pageStableAt=void 0,this.hasEmittedPageStable=!1,this.hasEmittedPageInteractive=!1,this.pendingCacheAndNetworkQueries.clear(),this.dirtyQueryCompletionTimes=[],this.teardownUserInputDetection(),this.logToDebugVisualizer("pendingGraphql","reset")}resetPerformanceObserver(){var e;(e=this.observer)==null||e.disconnect(),this.observer=new PerformanceObserver(this.collectPerformanceEntries.bind(this)),this.observer.observe({entryTypes:["layout-shift","resource","visibility-state","longtask"]})}async getFlagLabels(){if(this.flagLabelCache!==null)return this.flagLabelCache;const{flags:e}=await this.ensure(["flags"]),r={};for(const a of ps)r[`flag_${a}_enabled`]=e.get(a);return this.flagLabelCache=r,r}async recordAdminLoadedMetric(){const{metrics:e}=await this.ensure(["metrics"]);e.record(J.AdminLoaded,1)}createSpansForRouteTimings(){var e,r,a,i,u,l,f,h,v,y;for(const[A,S]of this.routeTimings.entries())(e=S.loader)!=null&&e.end&&((r=S.loader)!=null&&r.start)&&ee(`loader(${A})`,{end:S.loader.end,start:S.loader.start}),(a=S.componentAssets)!=null&&a.end&&((i=S.componentAssets)!=null&&i.start)&&ee(`componentAssets(${A})`,{end:S.componentAssets.end,start:S.componentAssets.start}),(u=S.loaderAssets)!=null&&u.end&&((l=S.loaderAssets)!=null&&l.start)&&ee(`loaderAssets(${A})`,{end:S.loaderAssets.end,start:S.loaderAssets.start}),(f=S.actionAssets)!=null&&f.end&&((h=S.actionAssets)!=null&&h.start)&&ee(`actionAssets(${A})`,{end:S.actionAssets.end,start:S.actionAssets.start}),(v=S.prefetch)!=null&&v.end&&((y=S.prefetch)!=null&&y.start)&&ee(`prefetch(${A})`,{end:S.prefetch.end,start:S.prefetch.start})}createSpansForRouteTimingsFromSnapshot(e){var r,a,i,u,l,f,h,v,y,A;for(const[S,E]of e.routeTimings.entries())(r=E.loader)!=null&&r.end&&((a=E.loader)!=null&&a.start)&&ee(`loader(${S})`,{end:E.loader.end,start:E.loader.start}),(i=E.componentAssets)!=null&&i.end&&((u=E.componentAssets)!=null&&u.start)&&ee(`componentAssets(${S})`,{end:E.componentAssets.end,start:E.componentAssets.start}),(l=E.loaderAssets)!=null&&l.end&&((f=E.loaderAssets)!=null&&f.start)&&ee(`loaderAssets(${S})`,{end:E.loaderAssets.end,start:E.loaderAssets.start}),(h=E.actionAssets)!=null&&h.end&&((v=E.actionAssets)!=null&&v.start)&&ee(`actionAssets(${S})`,{end:E.actionAssets.end,start:E.actionAssets.start}),(y=E.prefetch)!=null&&y.end&&((A=E.prefetch)!=null&&A.start)&&ee(`prefetch(${S})`,{end:E.prefetch.end,start:E.prefetch.start})}getLastPerformanceEntry(e){if(!(!e||e.length===0))return e.reduce((r,a)=>{const i=Fe(r)?r.responseEnd:r.startTime;return(Fe(a)?a.responseEnd:a.startTime)>i?a:r})}getLastLongTaskEntry(){const e=this.entryCollection.longtask;if(!(!e||e.length===0))return e.reduce((r,a)=>{const i=r.startTime+r.duration;return a.startTime+a.duration>i?a:r})}getFirstPerformanceEntry(e){if(!(!e||e.length===0))return e.reduce((r,a)=>{const i=Fe(r)?r.responseEnd:r.startTime;return(Fe(a)?a.responseEnd:a.startTime)<i?a:r})}checkNavigationComplete(){this.intervalId=setInterval(async()=>{var A,S;const e=(A=this.entryCollection.resource)==null?void 0:A.filter(({initiatorType:E,name:T})=>!["beacon","iframe"].includes(E)&&!T.includes("type=mutation")),r=this.getLastPerformanceEntry(e),a=!r||Ua(r),i=!$a(),u=a&&i&&!!this.loadingEndAt,l=this.getLastPerformanceEntry(this.entryCollection.graphqlQueries),f=this.getLastPerformanceEntry(this.entryCollection.images),h=this.getLastPerformanceEntry(this.entryCollection.scripts),v=this.getLastPerformanceEntry(this.entryCollection.layoutShift),y=this.getPageStableCandidate();if(this.logToDebugVisualizer("pageStable",{lastGraphqlQuery:l,lastImage:f,lastScript:h,lastLayoutShift:v,pageStableAt:y}),u){const E=this.getLastPerformanceEntry(this.entryCollection.graphqlQueries),T=this.getLastPerformanceEntry(this.entryCollection.images),C=this.getLastPerformanceEntry(this.entryCollection.scripts),I=this.getFirstPerformanceEntry(this.entryCollection.layoutShift),p=this.getLastPerformanceEntry(this.entryCollection.layoutShift),_=(S=this.entryCollection.layoutShift)==null?void 0:S.sort((x,O)=>O.value-x.value).at(0),P=this.getLastLongTaskEntry(),N=this.getPageStableCandidate();if(!this.pageStableAt&&N&&(this.pageStableAt=N,!this.hasEmittedPageStable&&!this.skipPageStableMetricsEmission&&this.emitPageStableMetric()),!this.pageStableAt||!this.pageInteractiveAt||this.delayMetrics)return;r&&this.createSpan("resource_complete",r),E&&this.createSpan("graphql_queries_complete",E),T&&this.createSpan("images_complete",T),C&&this.createSpan("scripts_complete",C),I&&this.createSpan("first_layout_shift",I),p&&this.createSpan("layout_shift_complete",p),_&&this.createSpan("largest_layout_shift",_),P&&this.createSpan("last_long_task",P,P.startTime+P.duration),ee("page_stable",{start:this.navigationStartAt,end:this.pageStableAt});const F=this.navigationContext.normalizedPathname??"unknown",q=!this.visitedRoutes.has(F);q&&this.visitedRoutes.add(F),this.emitMetrics({isCancelledNavigation:!1,firstFramePaintedAt:z(I==null?void 0:I.startTime),graphqlQueriesEndAt:z(E==null?void 0:E.responseEnd),imagesEndAt:z(T==null?void 0:T.responseEnd),scriptsEndAt:z(C==null?void 0:C.responseEnd),layoutShiftEndAt:z(p==null?void 0:p.startTime),pageStableAt:z(this.pageStableAt),pageInteractiveAt:z(this.pageInteractiveAt)},{isFirstExecution:q,largestLayoutShiftEndAt:z(_==null?void 0:_.startTime),lastLongTaskEndAt:z(P?P.startTime+P.duration:void 0)}),this.logToDebugVisualizer("finalPageStable",this.pageStableAt-this.navigationStartAt),this.pageStableDurationListeners.forEach(x=>x(this.pageStableDuration)),this.pageLoadComplete=!0,this.teardownUserInputDetection(),clearInterval(this.intervalId)}},250)}checkStableInteractive(){this.pageInteractiveIntervalId=setInterval(async()=>{const e=performance.now();if(this.pageInteractiveAt||!this.loadingEndAt||this.pendingCacheAndNetworkQueries.size>0)return;const r=500,a=this.getLastPerformanceEntry(this.entryCollection.layoutShift),i=this.dirtyQueryCompletionTimes.length>0?Math.max(...this.dirtyQueryCompletionTimes):void 0,u=this.getLastLongTaskEntry(),l=u?u.startTime+u.duration:void 0,f=!l||e-l>=r,h=!a||e-a.startTime>=r,v=!i||e-i>=r;if(this.loadingEndAt&&h&&v&&f){const y=[this.loadingEndAt];h&&a&&y.push(a.startTime),v&&i&&y.push(i),this.pageInteractiveAt=Math.max(...y),!this.hasEmittedPageInteractive&&!this.skipPageStableMetricsEmission&&this.emitPageInteractiveMetric(),ee("page_interactive",{start:this.navigationStartAt,end:this.pageInteractiveAt}),this.logToDebugVisualizer("tti",this.pageInteractiveAt-this.navigationStartAt,this.routerLoadersEndAt?this.routerLoadersEndAt-this.navigationStartAt:0),this.pageInteractiveDurationListeners.forEach(A=>A(this.pageInteractiveDuration)),clearInterval(this.pageInteractiveIntervalId),this.pageInteractiveIntervalId=void 0}},250)}createSpan(e,r,a){ee(e,{start:this.navigationStartAt,end:a??(Fe(r)?r.responseEnd:r.startTime)})}collectPerformanceEntries(e){this.ensureCollectionArraysExist();for(const r of e.getEntries()){if(!this.isValidEntryForCurrentNavigation(r))continue;const a=Ba(r.entryType);this.entryCollection[a]||(this.entryCollection[a]=[]),this.processEntry(r,a)}}ensureCollectionArraysExist(){["graphqlQueries","scripts","images"].forEach(e=>{this.entryCollection[e]||(this.entryCollection[e]=[])})}isValidEntryForCurrentNavigation(e){return(Fe(e)?e.responseEnd:e.startTime)>=this.navigationStartAt}processEntry(e,r){r==="layoutShift"?this.addLayoutShiftEntry(e):this.entryCollection[r].push(e),r==="longtask"&&this.logToDebugVisualizer("longTask",e),Fe(e)&&this.categorizeResourceEntry(e)}categorizeResourceEntry(e){var r,a,i;e.initiatorType==="fetch"&&/\/api\/shopify.+type=query|\/queries/.test(e.name)?(r=this.entryCollection.graphqlQueries)==null||r.push(e):e.initiatorType==="script"?(a=this.entryCollection.scripts)==null||a.push(e):e.initiatorType==="img"&&((i=this.entryCollection.images)==null||i.push(e))}shouldIgnoreLayoutShift(e){var i;const r=e;return(i=r.sources)!=null&&i.length?r.sources.every(u=>!u.node||!(u.node instanceof Element)?!1:u.node.hasAttribute(xn)?!0:u.node.closest(`[${xn}]`)!==null):!1}addLayoutShiftEntry(e){var r;this.shouldIgnoreLayoutShift(e)||Va(e)&&((r=this.entryCollection.layoutShift)==null||r.push(e),this.logToDebugVisualizer("layoutShift",e))}async checkForInterruptedNavigation(){!this.pageLoadComplete&&this.navigationStartAt&&await this.emitMetrics({isCancelledNavigation:!0,navigationCancelledAt:z(performance.now()),pageStableAt:z(this.pageStableAt),pageInteractiveAt:z(this.pageInteractiveAt)})}async emitCancelledNavigationMetrics(e){e.pageLoadComplete||await this.emitMetricsFromSnapshot(e,{isCancelledNavigation:!0,navigationCancelledAt:z(performance.now()),pageStableAt:z(e.pageStableAt),pageInteractiveAt:z(e.pageInteractiveAt)})}async emitMetricsFromSnapshot(e,r,a={isFirstExecution:!1}){var _,P,N,F,q,x,O,V,W,ne,Z,fe,ae,_e,Ee,Te,Le,be,Ae,he,we;this.createSpansForRouteTimingsFromSnapshot(e);const{browser:i,metrics:u,monorail:l,observability:f,serverData:h}=await this.ensure(["browser","metrics","monorail","observability","serverData"]);e.loadingEndAt&&ee("page_load",{start:e.navigationStartAt,end:e.loadingEndAt});const v=z(e.navigationStartAt),y=e.navigationStartAt===0,A=!!e.firstRedirectRouterState,S=((_=e.errorState)==null?void 0:_.statusCode)??200,E=y&&document.referrer?document.referrer:void 0,{normalizedPathname:T,previousNormalizedPathname:C,sliceName:I}=e.navigationContext;if(!r.isCancelledNavigation){const Se=await this.getCommonMetricLabelsFromSnapshot(e,h);for(const[Ie,ie]of e.routeTimings.entries())ie.loaderAssets&&u.record(J.PageLoaderAssetsDuration,Math.round(ie.loaderAssets.end-ie.loaderAssets.start),{...Se,manifestRouteId:Ie}),ie.componentAssets&&u.record(J.PageComponentAssetsDuration,Math.round(ie.componentAssets.end-ie.componentAssets.start),{...Se,manifestRouteId:Ie});if(typeof e.loadingEndAt<"u"){const Ie=e.aggregateLoaderDuration;Ie&&(ee("aggregate_loader_duration",{start:Ie.start,end:Ie.end}),u.record(J.PageAggregateLoaderDuration,Math.round(Ie.end-Ie.start),{...Se,isFirstExecution:a.isFirstExecution}));let ie="none";e.prefetchingEndAt&&(ie=e.prefetchingEndAt<=e.navigationStartAt?"full":"partial"),u.record(J.PageBlockingLoaderDuration,Math.round(e.loadingEndAt-e.navigationStartAt),{...Se,isFirstExecution:a.isFirstExecution,prefetched:ie}),this._isIdle=!0,(P=this.idlePromiseResolve)==null||P.call(this)}const me={...Se,statusCode:S,errorReported:(N=e.errorState)==null?void 0:N.errorReported};u.record(J.PageView,1,me);const pe={...me,userInputDetected:e.isUserInputDetected};typeof a.largestLayoutShiftEndAt<"u"&&u.record(J.PageLargestLayoutShiftDuration,a.largestLayoutShiftEndAt-v,pe),typeof a.lastLongTaskEndAt<"u"&&u.record(J.PageLastLongTaskDuration,a.lastLongTaskEndAt-v,pe)}const p={browserBackgroundedAt:z(e.browserBackgroundedAt),connectionType:Cn(),deployStage:h.deployStage,identityUuid:Dt(),isFullPageNavigation:y,isMobileWebviewNavigation:Ln(i),isRedirectNavigation:A,isStoreAdminPage:!0,isUserInputDetected:e.isUserInputDetected,loadingStartAt:z(e.routerLoadersStartAt),loadingEndAt:z(e.loadingEndAt),isFirstLoaderExecution:a.isFirstExecution,navigationStartAt:v,normalizedPathname:T,pathname:window.location.pathname,prefetchingEndAt:z(e.prefetchingEndAt),prefetchingStartAt:z(e.prefetchingStartAt),previousNormalizedPathname:C,previousPathname:(q=(F=e.routerStates[0])==null?void 0:F.location)==null?void 0:q.pathname,redirectNavigationPathname:(O=(x=e.firstRedirectRouterState)==null?void 0:x.location)==null?void 0:O.pathname,redirectNavigationStartAt:z(e.redirectNavigationStartAt),referrer:E,sliceName:I,statusCode:S,...r};this.skipPageStableMetricsEmission||(l.produce({schemaId:"admin_navigation_performance/2.9",payload:p}),f.adminWebNavigationEvent({eventType:"EVENT_TYPE_NAVIGATION_PERFORMANCE",navigationContext:{previousPathname:p.previousPathname,previousNormalizedPathname:p.previousNormalizedPathname},navigationPerformancePayload:{isMobileWebviewNavigation:p.isMobileWebviewNavigation,connectionType:p.connectionType,statusCode:S,isFullPageNavigation:p.isFullPageNavigation,isCancelledNavigation:!!r.isCancelledNavigation,isUserInputDetected:p.isUserInputDetected,browserBackgroundedAt:(V=p.browserBackgroundedAt)==null?void 0:V.toString(),isRedirectNavigation:A,redirectNavigationPathname:p.redirectNavigationPathname,redirectNavigationStartAt:(W=p.redirectNavigationStartAt)==null?void 0:W.toString(),navigationStartAt:(ne=p.navigationStartAt)==null?void 0:ne.toString(),firstFramePaintedAt:(Z=r.firstFramePaintedAt)==null?void 0:Z.toString(),graphqlQueriesEndAt:(fe=r.graphqlQueriesEndAt)==null?void 0:fe.toString(),imagesEndAt:(ae=r.imagesEndAt)==null?void 0:ae.toString(),scriptsEndAt:(_e=r.scriptsEndAt)==null?void 0:_e.toString(),layoutShiftEndAt:(Ee=r.layoutShiftEndAt)==null?void 0:Ee.toString(),pageStableAt:(Te=r.pageStableAt)==null?void 0:Te.toString(),navigationCancelledAt:(Le=r.navigationCancelledAt)==null?void 0:Le.toString(),prefetchingStartAt:(be=p.prefetchingStartAt)==null?void 0:be.toString(),prefetchingEndAt:(Ae=p.prefetchingEndAt)==null?void 0:Ae.toString(),loadingEndAt:(he=p.loadingEndAt)==null?void 0:he.toString(),loadingStartAt:(we=p.loadingStartAt)==null?void 0:we.toString(),sliceName:I,deployStage:"DEPLOY_STAGE_PRODUCTION",isFirstLoaderExecution:p.isFirstLoaderExecution},navigationPrefetchingPayload:null,forbiddenErrorsPayload:null})),this.routeTimings.clear()}async getCommonMetricLabels(){const e=this.navigationStartAt===0,r=!!this.firstRedirectRouterState,{manifestRouteId:a,normalizedPathname:i,sliceName:u}=this.navigationContext,l=await this.getFlagLabels(),{serverData:f}=await this.ensure(["serverData"]);return{isFullPageNavigation:e,isRedirectNavigation:r,slice:u??"unknown",manifestRouteId:a??"unknown",normalizedPathname:i??"unknown",reactRouter7Enabled:(f==null?void 0:f.reactRouter7Enabled)??!1,...l}}async getCommonMetricLabelsFromSnapshot(e,r){const a=e.navigationStartAt===0,i=!!e.firstRedirectRouterState,{manifestRouteId:u,normalizedPathname:l,sliceName:f}=e.navigationContext,h=await this.getFlagLabels();return{isFullPageNavigation:a,isRedirectNavigation:i,slice:f??"unknown",manifestRouteId:u??"unknown",normalizedPathname:l??"unknown",reactRouter7Enabled:(r==null?void 0:r.reactRouter7Enabled)??!1,...h}}async emitPageStableMetric(){if(!this.pageStableAt||this.hasEmittedPageStable)return;const{metrics:e}=await this.ensure(["metrics"]),a={...await this.getCommonMetricLabels(),statusCode:this.pageViewStatusCode,userInputDetected:this.isUserInputDetected},i=z(this.pageStableAt)-z(this.navigationStartAt);e.record(J.PageViewStableDuration,i,a),this.hasEmittedPageStable=!0}async emitPageInteractiveMetric(){if(!this.pageInteractiveAt||this.hasEmittedPageInteractive)return;const{metrics:e}=await this.ensure(["metrics"]),a={...await this.getCommonMetricLabels(),statusCode:this.pageViewStatusCode,userInputDetected:this.isUserInputDetected},i=z(this.pageInteractiveAt)-z(this.navigationStartAt);e.record(J.TimeToStableInteractive,i,a),this.hasEmittedPageInteractive=!0}async emitMetrics(e,r={isFirstExecution:!1}){var p,_,P,N,F,q,x,O,V,W,ne,Z,fe,ae,_e,Ee,Te,Le,be,Ae;this.createSpansForRouteTimings();const{browser:a,metrics:i,monorail:u,observability:l,serverData:f}=await this.ensure(["browser","metrics","monorail","observability","serverData"]);this.loadingEndAt&&ee("page_load",{start:this.navigationStartAt,end:this.loadingEndAt});const h=z(this.navigationStartAt),v=this.navigationStartAt===0,y=!!this.firstRedirectRouterState,A=this.pageViewStatusCode,S=v&&document.referrer?document.referrer:void 0,{normalizedPathname:E,previousNormalizedPathname:T,sliceName:C}=this.navigationContext;if(!e.isCancelledNavigation){const he=await this.getCommonMetricLabels();for(const[me,pe]of this.routeTimings.entries())pe.loaderAssets&&i.record(J.PageLoaderAssetsDuration,Math.round(pe.loaderAssets.end-pe.loaderAssets.start),{...he,manifestRouteId:me}),pe.componentAssets&&i.record(J.PageComponentAssetsDuration,Math.round(pe.componentAssets.end-pe.componentAssets.start),{...he,manifestRouteId:me});if(typeof this.loadingEndAt<"u"){const me=this.aggregateLoaderDuration;me&&(ee("aggregate_loader_duration",{start:me.start,end:me.end}),i.record(J.PageAggregateLoaderDuration,Math.round(me.end-me.start),{...he,isFirstExecution:r.isFirstExecution}));let pe="none";this.prefetchingEndAt&&(pe=this.prefetchingEndAt<=this.navigationStartAt?"full":"partial"),i.record(J.PageBlockingLoaderDuration,Math.round(this.loadingEndAt-this.navigationStartAt),{...he,isFirstExecution:r.isFirstExecution,prefetched:pe}),this._isIdle=!0,(p=this.idlePromiseResolve)==null||p.call(this)}const we={...he,statusCode:A,errorReported:(_=this.errorState)==null?void 0:_.errorReported};i.record(J.PageView,1,we);const Se={...we,userInputDetected:this.isUserInputDetected};typeof r.largestLayoutShiftEndAt<"u"&&i.record(J.PageLargestLayoutShiftDuration,r.largestLayoutShiftEndAt-h,Se),typeof r.lastLongTaskEndAt<"u"&&i.record(J.PageLastLongTaskDuration,r.lastLongTaskEndAt-h,Se)}const I={browserBackgroundedAt:z(this.browserBackgroundedAt),connectionType:Cn(),deployStage:f.deployStage,identityUuid:Dt(),isFullPageNavigation:v,isMobileWebviewNavigation:Ln(a),isRedirectNavigation:y,isStoreAdminPage:!0,isUserInputDetected:this.isUserInputDetected,loadingStartAt:z(this.routerLoadersStartAt),loadingEndAt:z(this.loadingEndAt),isFirstLoaderExecution:r.isFirstExecution,navigationStartAt:h,normalizedPathname:E,pathname:window.location.pathname,prefetchingEndAt:z(this.prefetchingEndAt),prefetchingStartAt:z(this.prefetchingStartAt),previousNormalizedPathname:T,previousPathname:(N=(P=this.routerStates[0])==null?void 0:P.location)==null?void 0:N.pathname,redirectNavigationPathname:(q=(F=this.firstRedirectRouterState)==null?void 0:F.location)==null?void 0:q.pathname,redirectNavigationStartAt:z(this.redirectNavigationStartAt),referrer:S,sliceName:C,statusCode:A,...e};this.skipPageStableMetricsEmission||(u.produce({schemaId:"admin_navigation_performance/2.9",payload:I}),l.adminWebNavigationEvent({eventType:"EVENT_TYPE_NAVIGATION_PERFORMANCE",navigationContext:{previousPathname:I.previousPathname,previousNormalizedPathname:I.previousNormalizedPathname},navigationPerformancePayload:{isMobileWebviewNavigation:I.isMobileWebviewNavigation,connectionType:I.connectionType,statusCode:A,isFullPageNavigation:I.isFullPageNavigation,isCancelledNavigation:!!e.isCancelledNavigation,isUserInputDetected:I.isUserInputDetected,browserBackgroundedAt:(x=I.browserBackgroundedAt)==null?void 0:x.toString(),isRedirectNavigation:y,redirectNavigationPathname:I.redirectNavigationPathname,redirectNavigationStartAt:(O=I.redirectNavigationStartAt)==null?void 0:O.toString(),navigationStartAt:(V=I.navigationStartAt)==null?void 0:V.toString(),firstFramePaintedAt:(W=e.firstFramePaintedAt)==null?void 0:W.toString(),graphqlQueriesEndAt:(ne=e.graphqlQueriesEndAt)==null?void 0:ne.toString(),imagesEndAt:(Z=e.imagesEndAt)==null?void 0:Z.toString(),scriptsEndAt:(fe=e.scriptsEndAt)==null?void 0:fe.toString(),layoutShiftEndAt:(ae=e.layoutShiftEndAt)==null?void 0:ae.toString(),pageStableAt:(_e=e.pageStableAt)==null?void 0:_e.toString(),navigationCancelledAt:(Ee=e.navigationCancelledAt)==null?void 0:Ee.toString(),prefetchingStartAt:(Te=I.prefetchingStartAt)==null?void 0:Te.toString(),prefetchingEndAt:(Le=I.prefetchingEndAt)==null?void 0:Le.toString(),loadingEndAt:(be=I.loadingEndAt)==null?void 0:be.toString(),loadingStartAt:(Ae=I.loadingStartAt)==null?void 0:Ae.toString(),sliceName:C,deployStage:"DEPLOY_STAGE_PRODUCTION",isFirstLoaderExecution:I.isFirstLoaderExecution},navigationPrefetchingPayload:null,forbiddenErrorsPayload:null})),this.routeTimings.clear()}setupUserInputDetection(){this.userInputListener&&this.teardownUserInputDetection(),this.userInputListener=r=>{r.isTrusted&&(r.type==="click"||r.type==="keydown"||r.type==="visibilitychange")&&(this.isUserInputDetected=!0,this.teardownUserInputDetection())};const e={capture:!0,passive:!0};document.addEventListener("click",this.userInputListener,e),document.addEventListener("keydown",this.userInputListener,e),document.addEventListener("visibilitychange",this.userInputListener,e)}teardownUserInputDetection(){if(!this.userInputListener)return;const e={capture:!0,passive:!0};document.removeEventListener("click",this.userInputListener,e),document.removeEventListener("keydown",this.userInputListener,e),document.removeEventListener("visibilitychange",this.userInputListener,e),this.userInputListener=null}}const ms=K(({ensure:n})=>{const e=new hs(n);let r;return n(["router"]).then(({router:a})=>{a.subscribe(i=>{var u,l;if(i.navigation.state==="loading"&&i.location.pathname!==i.navigation.location.pathname)(u=i.navigation.location.state)!=null&&u._isRedirect?e.redirect(i):e.reset(performance.now(),i),r=(l=a.getRouteInfo())==null?void 0:l.pathPattern;else if(i.navigation.state==="idle"){const{pathPattern:f,manifestRouteId:h,sliceName:v}=a.getRouteInfo();e.setNavigationContext({manifestRouteId:h,normalizedPathname:f,previousNormalizedPathname:r,sliceName:v,matches:i.matches}),e.loadingFinished(),e.setSkipPageStableMetricsEmission(i.matches.some(({route:y})=>["online-store:parent","apps:old_app_parent"].includes(y.id)))}})}).catch(a=>{throw a}),e}),vs=K(({ensure:n})=>{const e=U([]);let r=0;const a=new Map,i=[];let u;n(["i18n","locale"]).then(async f=>{u=Ga(f)}).catch(f=>{throw f});const l={get list(){return e.value},show(f){u&&Un(f,u)&&e.value.filter(h=>Un(h,u)).length||typeof f.id<"u"&&e.value.find(h=>h.id===f.id)||(f.id=f.id??String(++r),e.value=e.value.concat(f))},hide(f){f?e.value=e.value.filter(h=>f.id!==h.id):e.value=[]},setActionOptions(f,h){a.set(f,h)},clearActionOptions(f){a.delete(f)}};return n(["router"]).then(({router:f})=>{f.subscribe(({navigation:h,actionData:v})=>{h.state==="submitting"?i.length=0:Object.keys(v??{}).forEach(y=>{const A=v==null?void 0:v[y];if(A!=null&&A.notification&&!i.find(S=>Ha(A.notification,S))){const S={content:A.notification.content,error:A.notification.error,tone:A.notification.defaultTone},E=A.notification.key;let T=S;E&&a.has(E)&&(T={...S,...a.get(E)}),l.show(T),i.push(A.notification)}})})}).catch(f=>{throw f}),l});function Un({error:n,content:e},r){return n&&(e===r.translate("Common.serverError")||e===r.translate("Common.maskedDataMutationError"))}function ys({fetch:n,middleware:e}){return new _s(n,e)}class _s{constructor(e,r){G(this,"middleware");G(this,"fetch");this.middleware=r,typeof e=="function"?this.fetch=e:this.fetch=za(e)}query(e,{variables:r}={}){return(async()=>{try{return await this.run(e,{variables:r})}finally{}})()}async run(e,{variables:r}={}){const a=await this.fetch({document:e,variables:r??{}},this.middleware);if(a instanceof tr)throw a;const{data:i,error:u}=a;return i?{data:i}:{error:u}}}const Ss=Ht(403),Es=Ht(401),bs=Ht(404);async function As(n,e,r){if(!(r&&n instanceof Error&&r(n))){if(n instanceof tr){const a=ja(n.response,n.responseText);if(a instanceof Qa){const i=Ka(a);return e(i,a.reason),a}}ws(n)&&await Wa(n.error.errors)}}function ws(n){return!!(!(n instanceof Error)&&n.error&&n.error.name==="ExecutionError")}const Is=n=>{if(n instanceof Mt){const e=n==null?void 0:n.response.status,r=n==null?void 0:n.responseText;return e===bs||e===Ss&&r!=="CSRF"||e===Es&&r.includes("[TFA]")}return!1};function Ps(n,e,r){if(n instanceof Error&&!(n instanceof Mt)||!n.context)return;const{request:a,stats:i}=n.context;let u;n instanceof Mt?u=n.response:u=n.context.response;const l=!(n instanceof Error)&&typeof n.data=="object",f=l?n.extensions:void 0,h=n!=null&&!(n instanceof Error)&&n.error&&n.error instanceof Xa?n.error.errors.map(({message:E,path:T,extensions:C})=>({message:E,path:T&&Array.isArray(T)?T.join(","):void 0,extensions:C})):void 0,v=u instanceof Response&&u.headers.get(Nn.RequestId)||void 0,y=u instanceof Response&&u.headers.get(Nn.Profile)||void 0,A=u instanceof Response?u.status:void 0,S=u instanceof Response?u.url:void 0;e({graphQLClientType:"GraphQL-Lite",name:r??a.operationName??"Unknown",url:S,status:A,success:l,errorResponse:n!=null&&n instanceof Error&&n,errors:h,requestId:v,duration:i.duration,start:i.start,end:i.end,resultLength:l?JSON.stringify(n).length:void 0,extensions:f,request:{query:a.document,variables:a.variables},profileUrl:y})}const Ts=K(({serverData:n,unified:e,errorLogger:r,performance:a})=>{const i=n.isUnifiedApp,u=Ja({name:"core",apiEndpointPath:i?`/api/shopify/${e.storeHandle}`:"/admin/internal/web/graphql/core",host:location.hostname,csrfToken:n.csrfToken,getRedirectUrl(h){var v;if(i){const y=new URLSearchParams,A=(v=n==null?void 0:n.identityUser)==null?void 0:v.email;return A&&y.append("login_hint",A),y.append("returnPath",location.pathname),y.append("errorHint","client_api_error"),`/login?${y.toString()}`}return typeof h=="string"?h:h(encodeURIComponent(location.href))},errorLogger:r,performance:a}),l=Ya({csrfToken:n.csrfToken,buildVersion:n.buildVersion});return ys({fetch:{uri:`https://${u.host}${u.apiEndpointPath}`,headers:l},middleware:{response:async(h,v)=>{Ps(h,u.onOperation,v),await As(h,u.onRedirect,Is)}}})}),Ls=K(()=>{const n=U(0),e=U(0),r=U(0),a=U(null),i=Q(()=>n.value>0),u=Q(()=>{const h=n.value+r.value,v=h-n.value;return h&&v/h});let l;function f(){clearTimeout(l),n.value=0,r.value=0,e.value=0,a.value=null}return{get loading(){return i.value},get polarisLoadingStack(){return e.value},get progress(){return u.value},get loadInitiated(){return a.value},incrementPolarisLoadingStack(){e.value++},decrementPolarisLoadingStack(){e.value--},setLoadInitiated(h){a.value=h},start(){clearTimeout(l),n.value++,a.value=Date.now()},stop(){const h=n.value-1;h<0||(r.value++,n.value=h,h===0&&(l=setTimeout(f,100)))},reset:f}}),Cs=K(()=>{const n=U([]);return{get globallyDismissedHomeItemHandles(){return n.value},dismissHomeItemGlobally(e){n.value.includes(e)||(n.value=[...n.value,e])},undoDismissHomeItemGlobally(e){n.value=n.value.filter(r=>r!==e)}}});function Ns(n){return"completed"in n.status&&"failed"in n.status}function ks(n){return"completed"in n&&"failed"in n}const Rs=K(()=>{const n=U([]),e=U(!1),r=U(!0);function a(i,u){const l={...i};for(const f in u)u[f]&&(l[f]=u[f]);return l}return{add(i){const u=n.value.slice(),l=u.findIndex(f=>f.id===i.id);l>=0?u[l]={...u[l],...i}:u.push(i),n.value=u,r.value=!0,e.value=!1},update(i,u){let l=!1;n.value=n.value.map(f=>(f.id!==i||Ns(f)&&ks(u)&&(u.completed<f.status.completed||u.failed<f.status.failed)||(f.status=a(f.status,u),l=!0),f)),l&&(r.value=!0,e.value=!1)},updateSuccessAction(i,u){n.value=n.value.map(l=>(l.id===i&&(l.successAction=u),l))},updateErrorAction(i,u){n.value=n.value.map(l=>(l.id===i&&(l.errorAction=u),l))},remove(i){n.value=n.value.filter(u=>!i(u))},removeById(i){n.value=n.value.filter(u=>u.id!==i)},get items(){return n.value},expand(){e.value=!1},collapse(){e.value=!0},get isCollapsed(){return e.value},get isVisible(){return r.value},setIsVisible(i){r.value=i,i||(n.value=n.value.filter(u=>!u.status.isFinished))}}}),Os=()=>{const n=U(!1),e=U(!1),r=U([]),a=U("normal"),i=U(0),u=Q(()=>r.value[r.value.length-1]);return{get activeSidebar(){return u.value},get isExpanded(){return this.activeSidebar!==void 0},get isResizing(){return n.value},get isFullscreen(){return e.value},get mode(){return a.value},get width(){return i.value},setWidth(l){i.value=l},setMode(l){a.value=l},setFullscreen(l){e.value=l},open(l){const f=r.peek();r.value=[...f.filter(h=>h!==l),l]},close(l){const f=r.peek();f.includes(l)&&(r.value=f.filter(h=>h!==l))},toggleResizing(l){const f=n.peek();typeof l>"u"?n.value=!f:n.value=l}}},Ds=K(Os);var Pt={exports:{}},$n;function Ms(){return $n||($n=1,function(n,e){(function(r){n.exports=r()})(function(){var r=["navigation","request","process","log","user","state","error","manual"],a=function(t,s,c){for(var o=c,d=0,g=t.length;d<g;d++)o=s(o,t[d],d,t);return o},i=function(t,s){return a(t,function(c,o,d,g){return s(o,d,g)?c.concat(o):c},[])},u=function(t,s){return a(t,function(c,o,d,g){return c===!0||o===s},!1)},l=function(t){return Object.prototype.toString.call(t)==="[object Array]"},f=!{toString:null}.propertyIsEnumerable("toString"),h=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],v=function(t){var s=[],c;for(c in t)Object.prototype.hasOwnProperty.call(t,c)&&s.push(c);if(!f)return s;for(var o=0,d=h.length;o<d;o++)Object.prototype.hasOwnProperty.call(t,h[o])&&s.push(h[o]);return s},y=function(t,s){return t===void 0&&(t=1),function(c){return typeof c=="number"&&parseInt(""+c,10)===c&&c>=t&&c<=s}},A=function(t){return typeof t=="function"||l(t)&&i(t,function(s){return typeof s=="function"}).length===t.length},S=function(t){return typeof t=="string"&&!!t.length},E={},T=function(){return{unhandledExceptions:!0,unhandledRejections:!0}};E.schema={apiKey:{defaultValue:function(){return null},message:"is required",validate:S},appVersion:{defaultValue:function(){},message:"should be a string",validate:function(t){return t===void 0||S(t)}},appType:{defaultValue:function(){},message:"should be a string",validate:function(t){return t===void 0||S(t)}},autoDetectErrors:{defaultValue:function(){return!0},message:"should be true|false",validate:function(t){return t===!0||t===!1}},enabledErrorTypes:{defaultValue:function(){return T()},message:"should be an object containing the flags { unhandledExceptions:true|false, unhandledRejections:true|false }",allowPartialObject:!0,validate:function(t){if(typeof t!="object"||!t)return!1;var s=v(t),c=v(T());return!(i(s,function(o){return u(c,o)}).length<s.length||i(v(t),function(o){return typeof t[o]!="boolean"}).length>0)}},onError:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:A},onSession:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:A},onBreadcrumb:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:A},endpoints:{defaultValue:function(){return{notify:"https://notify.bugsnag.com",sessions:"https://sessions.bugsnag.com"}},message:"should be an object containing endpoint URLs { notify, sessions }",validate:function(t){return t&&typeof t=="object"&&S(t.notify)&&S(t.sessions)&&i(v(t),function(s){return!u(["notify","sessions"],s)}).length===0}},autoTrackSessions:{defaultValue:function(t){return!0},message:"should be true|false",validate:function(t){return t===!0||t===!1}},enabledReleaseStages:{defaultValue:function(){return null},message:"should be an array of strings",validate:function(t){return t===null||l(t)&&i(t,function(s){return typeof s=="string"}).length===t.length}},releaseStage:{defaultValue:function(){return"production"},message:"should be a string",validate:function(t){return typeof t=="string"&&t.length}},maxBreadcrumbs:{defaultValue:function(){return 25},message:"should be a number â‰¤100",validate:function(t){return y(0,100)(t)}},enabledBreadcrumbTypes:{defaultValue:function(){return r},message:"should be null or a list of available breadcrumb types ("+r.join(",")+")",validate:function(t){return t===null||l(t)&&a(t,function(s,c){return s===!1?s:u(r,c)},!0)}},context:{defaultValue:function(){},message:"should be a string",validate:function(t){return t===void 0||typeof t=="string"}},user:{defaultValue:function(){return{}},message:"should be an object with { id, email, name } properties",validate:function(t){return t===null||t&&a(v(t),function(s,c){return s&&u(["id","email","name"],c)},!0)}},metadata:{defaultValue:function(){return{}},message:"should be an object",validate:function(t){return typeof t=="object"&&t!==null}},logger:{defaultValue:function(){},message:"should be null or an object with methods { debug, info, warn, error }",validate:function(t){return!t||t&&a(["debug","info","warn","error"],function(s,c){return s&&typeof t[c]=="function"},!0)}},redactedKeys:{defaultValue:function(){return["password"]},message:"should be an array of strings|regexes",validate:function(t){return l(t)&&t.length===i(t,function(s){return typeof s=="string"||s&&typeof s.test=="function"}).length}},plugins:{defaultValue:function(){return[]},message:"should be an array of plugin objects",validate:function(t){return l(t)&&t.length===i(t,function(s){return s&&typeof s=="object"&&typeof s.load=="function"}).length}},featureFlags:{defaultValue:function(){return[]},message:'should be an array of objects that have a "name" property',validate:function(t){return l(t)&&t.length===i(t,function(s){return s&&typeof s=="object"&&typeof s.name=="string"}).length}}};var C=function(t){for(var s=1;s<arguments.length;s++){var c=arguments[s];for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o])}return t},I=function(t,s){return a(t,function(c,o,d,g){return c.concat(s(o,d,g))},[])};function p(){return p=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var c=arguments[s];for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o])}return t},p.apply(this,arguments)}var _=E.schema,P={releaseStage:C({},_.releaseStage,{defaultValue:function(){return/^localhost(:\d+)?$/.test(window.location.host)?"development":"production"}}),appType:p({},_.appType,{defaultValue:function(){return"browser"}}),logger:C({},_.logger,{defaultValue:function(){return typeof console<"u"&&typeof console.debug=="function"?N():void 0}})},N=function(){var t={},s=console.log;return I(["debug","info","warn","error"],function(c){var o=console[c];t[c]=typeof o=="function"?o.bind(console,"[bugsnag]"):s.bind(console,"[bugsnag]")}),t},F=function(){function t(c,o,d,g){g===void 0&&(g=new Date),this.type=d,this.message=c,this.metadata=o,this.timestamp=g}var s=t.prototype;return s.toJSON=function(){return{type:this.type,name:this.message,timestamp:this.timestamp,metaData:this.metadata}},t}(),q=F,x={};(function(t,s){typeof x=="object"?x=s():t.StackFrame=s()})(this,function(){function t(L){return!isNaN(parseFloat(L))&&isFinite(L)}function s(L){return L.charAt(0).toUpperCase()+L.substring(1)}function c(L){return function(){return this[L]}}var o=["isConstructor","isEval","isNative","isToplevel"],d=["columnNumber","lineNumber"],g=["fileName","functionName","source"],m=["args"],w=o.concat(d,g,m);function b(L){if(L instanceof Object)for(var $=0;$<w.length;$++)L.hasOwnProperty(w[$])&&L[w[$]]!==void 0&&this["set"+s(w[$])](L[w[$]])}b.prototype={getArgs:function(){return this.args},setArgs:function(L){if(Object.prototype.toString.call(L)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=L},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(L){if(L instanceof b)this.evalOrigin=L;else if(L instanceof Object)this.evalOrigin=new b(L);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var L=this.getFunctionName()||"{anonymous}",$="("+(this.getArgs()||[]).join(",")+")",j=this.getFileName()?"@"+this.getFileName():"",Y=t(this.getLineNumber())?":"+this.getLineNumber():"",M=t(this.getColumnNumber())?":"+this.getColumnNumber():"";return L+$+j+Y+M}};for(var R=0;R<o.length;R++)b.prototype["get"+s(o[R])]=c(o[R]),b.prototype["set"+s(o[R])]=function(L){return function($){this[L]=!!$}}(o[R]);for(var k=0;k<d.length;k++)b.prototype["get"+s(d[k])]=c(d[k]),b.prototype["set"+s(d[k])]=function(L){return function($){if(!t($))throw new TypeError(L+" must be a Number");this[L]=Number($)}}(d[k]);for(var D=0;D<g.length;D++)b.prototype["get"+s(g[D])]=c(g[D]),b.prototype["set"+s(g[D])]=function(L){return function($){this[L]=String($)}}(g[D]);return b});var O={};(function(t,s){typeof O=="object"?O=s(x):t.ErrorStackParser=s(t.StackFrame)})(this,function(s){var c=/(^|@)\S+\:\d+/,o=/^\s*at .*(\S+\:\d+|\(native\))/m,d=/^(eval@)?(\[native code\])?$/;return{parse:function(m){if(typeof m.stacktrace<"u"||typeof m["opera#sourceloc"]<"u")return this.parseOpera(m);if(m.stack&&m.stack.match(o))return this.parseV8OrIE(m);if(m.stack)return this.parseFFOrSafari(m);throw new Error("Cannot parse given Error object")},extractLocation:function(m){if(m.indexOf(":")===-1)return[m];var w=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,b=w.exec(m.replace(/[\(\)]/g,""));return[b[1],b[2]||void 0,b[3]||void 0]},parseV8OrIE:function(m){var w=m.stack.split(`
`).filter(function(b){return!!b.match(o)},this);return w.map(function(b){b.indexOf("(eval ")>-1&&(b=b.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var R=b.replace(/^\s+/,"").replace(/\(eval code/g,"("),k=R.match(/ (\((.+):(\d+):(\d+)\)$)/);R=k?R.replace(k[0],""):R;var D=R.split(/\s+/).slice(1),L=this.extractLocation(k?k[1]:D.pop()),$=D.join(" ")||void 0,j=["eval","<anonymous>"].indexOf(L[0])>-1?void 0:L[0];return new s({functionName:$,fileName:j,lineNumber:L[1],columnNumber:L[2],source:b})},this)},parseFFOrSafari:function(m){var w=m.stack.split(`
`).filter(function(b){return!b.match(d)},this);return w.map(function(b){if(b.indexOf(" > eval")>-1&&(b=b.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),b.indexOf("@")===-1&&b.indexOf(":")===-1)return new s({functionName:b});var R=/((.*".+"[^@]*)?[^@]*)(?:@)/,k=b.match(R),D=k&&k[1]?k[1]:void 0,L=this.extractLocation(b.replace(R,""));return new s({functionName:D,fileName:L[0],lineNumber:L[1],columnNumber:L[2],source:b})},this)},parseOpera:function(m){return!m.stacktrace||m.message.indexOf(`
`)>-1&&m.message.split(`
`).length>m.stacktrace.split(`
`).length?this.parseOpera9(m):m.stack?this.parseOpera11(m):this.parseOpera10(m)},parseOpera9:function(m){for(var w=/Line (\d+).*script (?:in )?(\S+)/i,b=m.message.split(`
`),R=[],k=2,D=b.length;k<D;k+=2){var L=w.exec(b[k]);L&&R.push(new s({fileName:L[2],lineNumber:L[1],source:b[k]}))}return R},parseOpera10:function(m){for(var w=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,b=m.stacktrace.split(`
`),R=[],k=0,D=b.length;k<D;k+=2){var L=w.exec(b[k]);L&&R.push(new s({functionName:L[3]||void 0,fileName:L[2],lineNumber:L[1],source:b[k]}))}return R},parseOpera11:function(m){var w=m.stack.split(`
`).filter(function(b){return!!b.match(c)&&!b.match(/^Error created at/)},this);return w.map(function(b){var R=b.split("@"),k=this.extractLocation(R.pop()),D=R.shift()||"",L=D.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0,$;D.match(/\(([^\)]*)\)/)&&($=D.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var j=$===void 0||$==="[arguments not available]"?void 0:$.split(",");return new s({functionName:L,args:j,fileName:k[0],lineNumber:k[1],columnNumber:k[2],source:b})},this)}}});var V=O,W=function(t,s,c,o){var d=o&&o.redactedKeys?o.redactedKeys:[],g=o&&o.redactedPaths?o.redactedPaths:[];return JSON.stringify(we(t,d,g),s,c)},ne=20,Z=25e3,fe=8,ae="...";function _e(t){return t instanceof Error||/^\[object (Error|(Dom)?Exception)\]$/.test(Object.prototype.toString.call(t))}function Ee(t){return"[Throws: "+(t?t.message:"?")+"]"}function Te(t,s){for(var c=0,o=t.length;c<o;c++)if(t[c]===s)return!0;return!1}function Le(t,s){for(var c=0,o=t.length;c<o;c++)if(s.indexOf(t[c])===0)return!0;return!1}function be(t,s){for(var c=0,o=t.length;c<o;c++)if(typeof t[c]=="string"&&t[c].toLowerCase()===s.toLowerCase()||t[c]&&typeof t[c].test=="function"&&t[c].test(s))return!0;return!1}function Ae(t){return Object.prototype.toString.call(t)==="[object Array]"}function he(t,s){try{return t[s]}catch(c){return Ee(c)}}function we(t,s,c){var o=[],d=0;function g(m,w){function b(){return w.length>fe&&d>Z}if(d++,w.length>ne||b())return ae;if(m===null||typeof m!="object")return m;if(Te(o,m))return"[Circular]";if(o.push(m),typeof m.toJSON=="function")try{d--;var R=g(m.toJSON(),w);return o.pop(),R}catch(H){return Ee(H)}var k=_e(m);if(k){d--;var D=g({name:m.name,message:m.message},w);return o.pop(),D}if(Ae(m)){for(var L=[],$=0,j=m.length;$<j;$++){if(b()){L.push(ae);break}L.push(g(m[$],w.concat("[]")))}return o.pop(),L}var Y={};try{for(var M in m)if(Object.prototype.hasOwnProperty.call(m,M)){if(Le(c,w.join("."))&&be(s,M)){Y[M]="[REDACTED]";continue}if(b()){Y[M]=ae;break}Y[M]=g(he(m,M),w.concat(M))}}catch{}return o.pop(),Y}return g(t,[])}function Se(t,s,c,o){if(typeof c=="string"){o===void 0?o=null:o!==null&&typeof o!="string"&&(o=W(o));var d=s[c];if(typeof d=="number"){t[d]={name:c,variant:o};return}t.push({name:c,variant:o}),s[c]=t.length-1}}function me(t,s,c){if(l(s)){for(var o=0;o<s.length;++o){var d=s[o];d===null||typeof d!="object"||Se(t,c,d.name,d.variant)}return t}}function pe(t){return I(i(t,Boolean),function(s){var c=s.name,o=s.variant,d={featureFlag:c};return typeof o=="string"&&(d.variant=o),d})}function Ie(t,s,c){var o=s[c];typeof o=="number"&&(t[o]=null,delete s[c])}var ie={add:Se,clear:Ie,merge:me,toEventApi:pe},rt=function(t){return!!t&&(!!t.stack||!!t.stacktrace||!!t["opera#sourceloc"])&&typeof(t.stack||t.stacktrace||t["opera#sourceloc"])=="string"&&t.stack!==t.name+": "+t.message},Nr=kr;function kr(t){switch(Object.prototype.toString.call(t)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return t instanceof Error}}var at=Nr,Rr=function(t,s,c,o){var d;if(s){var g;if(c===null)return jt(t,s);typeof c=="object"&&(g=c),typeof c=="string"&&(g=(d={},d[c]=o,d)),g&&(s==="__proto__"||s==="constructor"||s==="prototype"||(t[s]||(t[s]={}),t[s]=C({},t[s],g)))}},Or=function(t,s,c){if(typeof s=="string"){if(!c)return t[s];if(t[s])return t[s][c]}},jt=function(t,s,c){if(typeof s=="string"){if(!c){delete t[s];return}s==="__proto__"||s==="constructor"||s==="prototype"||t[s]&&delete t[s][c]}},$e={add:Rr,get:Or,clear:jt},dt={};(function(t,s){typeof dt=="object"?dt=s(x):t.StackGenerator=s(t.StackFrame)})(this,function(t){return{backtrace:function(c){var o=[],d=10;typeof c=="object"&&typeof c.maxStackSize=="number"&&(d=c.maxStackSize);for(var g=arguments.callee;g&&o.length<d&&g.arguments;){for(var m=new Array(g.arguments.length),w=0;w<m.length;++w)m[w]=g.arguments[w];/function(?:\s+([\w$]+))+\s*\(/.test(g.toString())?o.push(new t({functionName:RegExp.$1||void 0,args:m})):o.push(new t({args:m}));try{g=g.caller}catch{break}}return o}}});function ft(){return ft=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var c=arguments[s];for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o])}return t},ft.apply(this,arguments)}var De=function(){function t(c,o,d,g,m){d===void 0&&(d=[]),g===void 0&&(g=Fr()),this.apiKey=void 0,this.context=void 0,this.groupingHash=void 0,this.originalError=m,this._handledState=g,this.severity=this._handledState.severity,this.unhandled=this._handledState.unhandled,this.app={},this.device={},this.request={},this.breadcrumbs=[],this.threads=[],this._metadata={},this._features=[],this._featuresIndex={},this._user={},this._session=void 0,this._correlation=void 0,this.errors=[Kt(c,o,t.__type,d)]}var s=t.prototype;return s.addMetadata=function(o,d,g){return $e.add(this._metadata,o,d,g)},s.setTraceCorrelation=function(o,d){typeof o=="string"&&(this._correlation=ft({traceId:o},typeof d=="string"?{spanId:d}:{}))},s.getMetadata=function(o,d){return $e.get(this._metadata,o,d)},s.clearMetadata=function(o,d){return $e.clear(this._metadata,o,d)},s.addFeatureFlag=function(o,d){d===void 0&&(d=null),ie.add(this._features,this._featuresIndex,o,d)},s.addFeatureFlags=function(o){ie.merge(this._features,o,this._featuresIndex)},s.getFeatureFlags=function(){return ie.toEventApi(this._features)},s.clearFeatureFlag=function(o){ie.clear(this._features,this._featuresIndex,o)},s.clearFeatureFlags=function(){this._features=[],this._featuresIndex={}},s.getUser=function(){return this._user},s.setUser=function(o,d,g){this._user={id:o,email:d,name:g}},s.toJSON=function(){return{payloadVersion:"4",exceptions:I(this.errors,function(o){return C({},o,{message:o.errorMessage})}),severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,request:this.request,breadcrumbs:this.breadcrumbs,context:this.context,groupingHash:this.groupingHash,metaData:this._metadata,user:this._user,session:this._session,featureFlags:this.getFeatureFlags(),correlation:this._correlation}},t}(),Dr=function(t){var s={file:t.fileName,method:Mr(t.functionName),lineNumber:t.lineNumber,columnNumber:t.columnNumber,code:void 0,inProject:void 0};return s.lineNumber>-1&&!s.file&&!s.method&&(s.file="global code"),s},Mr=function(t){return/^global code$/i.test(t)?"global code":t},Fr=function(){return{unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}},Qt=function(t){return typeof t=="string"?t:""};function Kt(t,s,c,o){return{errorClass:Qt(t),errorMessage:Qt(s),type:c,stacktrace:a(o,function(d,g){var m=Dr(g);try{return JSON.stringify(m)==="{}"?d:d.concat(m)}catch{return d}},[])}}function Wt(t){return t.cause?[t].concat(Wt(t.cause)):[t]}De.getStacktrace=function(t,s,c){if(rt(t))return V.parse(t).slice(s);try{return i(dt.backtrace(),function(o){return(o.functionName||"").indexOf("StackGenerator$$")===-1}).slice(1+c)}catch{return[]}},De.create=function(t,s,c,o,d,g){d===void 0&&(d=0);var m=Jt(t,s,o,g),w=m[0],b=m[1],R;try{var k=De.getStacktrace(w,b>0?1+b+d:0,1+d);R=new De(w.name,w.message,k,c,t)}catch{R=new De(w.name,w.message,[],c,t)}if(w.name==="InvalidError"&&R.addMetadata(""+o,"non-error parameter",Xt(t)),w.cause){var D,L=Wt(w).slice(1),$=I(L,function(j){var Y=at(j)&&rt(j)?V.parse(j):[],M=Jt(j,!0,"error cause"),H=M[0];return H.name==="InvalidError"&&R.addMetadata("error cause",Xt(j)),Kt(H.name,H.message,De.__type,Y)});(D=R.errors).push.apply(D,$)}return R};var Xt=function(t){return t===null?"null":t===void 0?"undefined":t},Jt=function(t,s,c,o){var d,g=0,m=function(w){var b=c==="error cause"?"was":"received";o&&o.warn(c+" "+b+' a non-error: "'+w+'"');var R=new Error(c+" "+b+' a non-error. See "'+c+'" tab for more detail.');return R.name="InvalidError",R};if(!s)at(t)?d=t:(d=m(typeof t),g+=2);else switch(typeof t){case"string":case"number":case"boolean":d=new Error(String(t)),g+=1;break;case"function":d=m("function"),g+=2;break;case"object":t!==null&&at(t)?d=t:t!==null&&xr(t)?(d=new Error(t.message||t.errorMessage),d.name=t.name||t.errorClass,g+=1):(d=m(t===null?"null":"unsupported object"),g+=2);break;default:d=m("nothing"),g+=2}if(!rt(d))try{throw d}catch(w){rt(w)&&(d=w,g=1)}return[d,g]};De.__type="browserjs";var xr=function(t){return(typeof t.name=="string"||typeof t.errorClass=="string")&&(typeof t.message=="string"||typeof t.errorMessage=="string")},pt=De,qr=function(t,s,c){var o=0,d=function(){if(o>=t.length)return c(null,!0);s(t[o],function(g,m){if(g)return c(g);if(m===!1)return c(null,!1);o++,d()})};d()},Ur=function(t,s,c,o){var d=function(g,m){if(typeof g!="function")return m(null);try{if(g.length!==2){var w=g(s);return w&&typeof w.then=="function"?w.then(function(b){return setTimeout(function(){return m(null,b)})},function(b){setTimeout(function(){return c(b),m(null,!0)})}):m(null,w)}g(s,function(b,R){if(b)return c(b),m(null);m(null,R)})}catch(b){c(b),m(null)}};qr(t,d,o)},Yt=function(t,s,c,o){for(var d=!1,g=t.slice();!d&&g.length;)try{d=g.pop()(s)===!1}catch(m){o.error("Error occurred in "+c+" callback, continuing anywayâ€¦"),o.error(m)}return d},gt=function(s,c){var o="000000000"+s;return o.substr(o.length-c)},Zt=typeof window=="object"?window:self,en=0;for(var $r in Zt)Object.hasOwnProperty.call(Zt,$r)&&en++;var Br=navigator.mimeTypes?navigator.mimeTypes.length:0,Vr=gt((Br+navigator.userAgent.length).toString(36)+en.toString(36),4),tn=function(){return Vr},We=0,ht=4,it=36,nn=Math.pow(it,ht);function rn(){return gt((Math.random()*nn<<0).toString(it),ht)}function Gr(){return We=We<nn?We:0,We++,We-1}function an(){var t="c",s=new Date().getTime().toString(it),c=gt(Gr().toString(it),ht),o=tn(),d=rn()+rn();return t+s+c+o+d}an.fingerprint=tn;var Hr=an,zr=function(){function t(){this.id=Hr(),this.startedAt=new Date,this._handled=0,this._unhandled=0,this._user={},this.app={},this.device={}}var s=t.prototype;return s.getUser=function(){return this._user},s.setUser=function(o,d,g){this._user={id:o,email:d,name:g}},s.toJSON=function(){return{id:this.id,startedAt:this.startedAt,events:{handled:this._handled,unhandled:this._unhandled}}},s._track=function(o){this[o._handledState.unhandled?"_unhandled":"_handled"]+=1},t}(),mt=zr,jr=ie.add,Qr=ie.clear,vt=ie.merge,Me=function(){},Kr=function(){function t(c,o,d,g){var m=this;o===void 0&&(o=E.schema),d===void 0&&(d=[]),this._notifier=g,this._config={},this._schema=o,this._delivery={sendSession:Me,sendEvent:Me},this._logger={debug:Me,info:Me,warn:Me,error:Me},this._plugins={},this._breadcrumbs=[],this._session=null,this._metadata={},this._featuresIndex={},this._features=[],this._context=void 0,this._user={},this._cbs={e:[],s:[],sp:[],b:[]},this.Client=t,this.Event=pt,this.Breadcrumb=q,this.Session=mt,this._config=this._configure(c,d),I(d.concat(this._config.plugins),function(R){R&&m._loadPlugin(R)}),this._depth=1;var w=this,b=this.notify;this.notify=function(){return b.apply(w,arguments)}}var s=t.prototype;return s.addMetadata=function(o,d,g){return $e.add(this._metadata,o,d,g)},s.getMetadata=function(o,d){return $e.get(this._metadata,o,d)},s.clearMetadata=function(o,d){return $e.clear(this._metadata,o,d)},s.addFeatureFlag=function(o,d){d===void 0&&(d=null),jr(this._features,this._featuresIndex,o,d)},s.addFeatureFlags=function(o){vt(this._features,o,this._featuresIndex)},s.clearFeatureFlag=function(o){Qr(this._features,this._featuresIndex,o)},s.clearFeatureFlags=function(){this._features=[],this._featuresIndex={}},s.getContext=function(){return this._context},s.setContext=function(o){this._context=o},s._configure=function(o,d){var g=a(d,function(R,k){return k&&k.configSchema?C({},R,k.configSchema):R},this._schema),m=a(v(g),function(R,k){var D=g[k].defaultValue(o[k]);if(o[k]!==void 0){var L=g[k].validate(o[k]);L?g[k].allowPartialObject?R.config[k]=C(D,o[k]):R.config[k]=o[k]:(R.errors[k]=g[k].message,R.config[k]=D)}else R.config[k]=D;return R},{errors:{},config:{}}),w=m.errors,b=m.config;if(g.apiKey){if(!b.apiKey)throw new Error("No Bugsnag API Key set");/^[0-9a-f]{32}$/i.test(b.apiKey)||(w.apiKey="should be a string of 32 hexadecimal characters")}return this._metadata=C({},b.metadata),vt(this._features,b.featureFlags,this._featuresIndex),this._user=C({},b.user),this._context=b.context,b.logger&&(this._logger=b.logger),b.onError&&(this._cbs.e=this._cbs.e.concat(b.onError)),b.onBreadcrumb&&(this._cbs.b=this._cbs.b.concat(b.onBreadcrumb)),b.onSession&&(this._cbs.s=this._cbs.s.concat(b.onSession)),v(w).length&&this._logger.warn(Wr(w,o)),b},s.getUser=function(){return this._user},s.setUser=function(o,d,g){this._user={id:o,email:d,name:g}},s._loadPlugin=function(o){var d=o.load(this);return o.name&&(this._plugins["~"+o.name+"~"]=d),this},s.getPlugin=function(o){return this._plugins["~"+o+"~"]},s._setDelivery=function(o){this._delivery=o(this)},s.startSession=function(){var o=new mt;o.app.releaseStage=this._config.releaseStage,o.app.version=this._config.appVersion,o.app.type=this._config.appType,o._user=C({},this._user);var d=Yt(this._cbs.s,o,"onSession",this._logger);return d?(this._logger.debug("Session not started due to onSession callback"),this):this._sessionDelegate.startSession(this,o)},s.addOnError=function(o,d){d===void 0&&(d=!1),this._cbs.e[d?"unshift":"push"](o)},s.removeOnError=function(o){this._cbs.e=i(this._cbs.e,function(d){return d!==o})},s._addOnSessionPayload=function(o){this._cbs.sp.push(o)},s.addOnSession=function(o){this._cbs.s.push(o)},s.removeOnSession=function(o){this._cbs.s=i(this._cbs.s,function(d){return d!==o})},s.addOnBreadcrumb=function(o,d){d===void 0&&(d=!1),this._cbs.b[d?"unshift":"push"](o)},s.removeOnBreadcrumb=function(o){this._cbs.b=i(this._cbs.b,function(d){return d!==o})},s.pauseSession=function(){return this._sessionDelegate.pauseSession(this)},s.resumeSession=function(){return this._sessionDelegate.resumeSession(this)},s.leaveBreadcrumb=function(o,d,g){if(o=typeof o=="string"?o:"",g=typeof g=="string"&&u(r,g)?g:"manual",d=typeof d=="object"&&d!==null?d:{},!!o){var m=new q(o,d,g),w=Yt(this._cbs.b,m,"onBreadcrumb",this._logger);if(w){this._logger.debug("Breadcrumb not attached due to onBreadcrumb callback");return}this._breadcrumbs.push(m),this._breadcrumbs.length>this._config.maxBreadcrumbs&&(this._breadcrumbs=this._breadcrumbs.slice(this._breadcrumbs.length-this._config.maxBreadcrumbs))}},s._isBreadcrumbTypeEnabled=function(o){var d=this._config.enabledBreadcrumbTypes;return d===null||u(d,o)},s.notify=function(o,d,g){g===void 0&&(g=Me);var m=pt.create(o,!0,void 0,"notify()",this._depth+1,this._logger);this._notify(m,d,g)},s._notify=function(o,d,g){var m=this;if(g===void 0&&(g=Me),o.app=C({},o.app,{releaseStage:this._config.releaseStage,version:this._config.appVersion,type:this._config.appType}),o.context=o.context||this._context,o._metadata=C({},o._metadata,this._metadata),o._user=C({},o._user,this._user),o.breadcrumbs=this._breadcrumbs.slice(),vt(o._features,this._features,o._featuresIndex),this._config.enabledReleaseStages!==null&&!u(this._config.enabledReleaseStages,this._config.releaseStage))return this._logger.warn("Event not sent due to releaseStage/enabledReleaseStages configuration"),g(null,o);var w=o.severity,b=function(k){m._logger.error("Error occurred in onError callback, continuing anywayâ€¦"),m._logger.error(k)},R=[].concat(this._cbs.e).concat(d);Ur(R,o,b,function(k,D){if(k&&b(k),!D)return m._logger.debug("Event not sent due to onError callback"),g(null,o);m._isBreadcrumbTypeEnabled("error")&&t.prototype.leaveBreadcrumb.call(m,o.errors[0].errorClass,{errorClass:o.errors[0].errorClass,errorMessage:o.errors[0].errorMessage,severity:o.severity},"error"),w!==o.severity&&(o._handledState.severityReason={type:"userCallbackSetSeverity"}),o.unhandled!==o._handledState.unhandled&&(o._handledState.severityReason.unhandledOverridden=!0,o._handledState.unhandled=o.unhandled),m._session&&(m._session._track(o),o._session=m._session),m._delivery.sendEvent({apiKey:o.apiKey||m._config.apiKey,notifier:m._notifier,events:[o]},function(L){return g(L,o)})})},t}(),Wr=function(t,s){var c=new Error(`Invalid configuration
`+I(v(t),function(o){return"  - "+o+" "+t[o]+", got "+Xr(s[o])}).join(`

`));return c},Xr=function(t){switch(typeof t){case"string":case"number":case"object":return JSON.stringify(t);default:return String(t)}},yt=Kr,Be={},sn=["events.[].metaData","events.[].breadcrumbs.[].metaData","events.[].request"];Be.event=function(t,s){var c=W(t,null,null,{redactedPaths:sn,redactedKeys:s});return c.length>1e6&&(t.events[0]._metadata={notifier:`WARNING!
Serialized payload was `+c.length/1e6+`MB (limit = 1MB)
metadata was removed`},c=W(t,null,null,{redactedPaths:sn,redactedKeys:s})),c},Be.session=function(t,s){var c=W(t,null,null);return c};var _t={};_t=function(t,s){return s===void 0&&(s=window),{sendEvent:function(c,o){o===void 0&&(o=function(){});var d=on(t._config,"notify","4",s),g=Be.event(c,t._config.redactedKeys),m=new s.XDomainRequest;m.onload=function(){o(null)},m.onerror=function(){var w=new Error("Event failed to send");t._logger.error("Event failed to sendâ€¦",w),g.length>1e6&&t._logger.warn("Event oversized ("+(g.length/1e6).toFixed(2)+" MB)"),o(w)},m.open("POST",d),setTimeout(function(){try{m.send(g)}catch(w){t._logger.error(w),o(w)}},0)},sendSession:function(c,o){o===void 0&&(o=function(){});var d=on(t._config,"sessions","1",s),g=new s.XDomainRequest;g.onload=function(){o(null)},g.open("POST",d),setTimeout(function(){try{g.send(Be.session(c,t._config.redactedKeys))}catch(m){t._logger.error(m),o(m)}},0)}}};var on=function(t,s,c,o){var d=JSON.parse(JSON.stringify(new Date)),g=Jr(t.endpoints[s],o.location.protocol);return g+"?apiKey="+encodeURIComponent(t.apiKey)+"&payloadVersion="+c+"&sentAt="+encodeURIComponent(d)},Jr=_t._matchPageProtocol=function(t,s){return s==="http:"?t.replace(/^https:/,"http:"):t},Yr=function(t,s){return s===void 0&&(s=window),{sendEvent:function(c,o){o===void 0&&(o=function(){});try{var d=t._config.endpoints.notify,g=new s.XMLHttpRequest,m=Be.event(c,t._config.redactedKeys);g.onreadystatechange=function(){if(g.readyState===s.XMLHttpRequest.DONE){var w=g.status;if(w===0||w>=400){var b=new Error("Request failed with status "+w);t._logger.error("Event failed to sendâ€¦",b),m.length>1e6&&t._logger.warn("Event oversized ("+(m.length/1e6).toFixed(2)+" MB)"),o(b)}else o(null)}},g.open("POST",d),g.setRequestHeader("Content-Type","application/json"),g.setRequestHeader("Bugsnag-Api-Key",c.apiKey||t._config.apiKey),g.setRequestHeader("Bugsnag-Payload-Version","4"),g.setRequestHeader("Bugsnag-Sent-At",new Date().toISOString()),g.send(m)}catch(w){t._logger.error(w)}},sendSession:function(c,o){o===void 0&&(o=function(){});try{var d=t._config.endpoints.sessions,g=new s.XMLHttpRequest;g.onreadystatechange=function(){if(g.readyState===s.XMLHttpRequest.DONE){var m=g.status;if(m===0||m>=400){var w=new Error("Request failed with status "+m);t._logger.error("Session failed to sendâ€¦",w),o(w)}else o(null)}},g.open("POST",d),g.setRequestHeader("Content-Type","application/json"),g.setRequestHeader("Bugsnag-Api-Key",t._config.apiKey),g.setRequestHeader("Bugsnag-Payload-Version","1"),g.setRequestHeader("Bugsnag-Sent-At",new Date().toISOString()),g.send(Be.session(c,t._config.redactedKeys))}catch(m){t._logger.error(m)}}}},un=new Date,Zr=function(){un=new Date},ea={name:"appDuration",load:function(t){return t.addOnError(function(s){var c=new Date;s.app.duration=c-un},!0),{reset:Zr}}},ta=function(t){return t===void 0&&(t=window),{load:function(s){s.addOnError(function(c){c.context===void 0&&(c.context=t.location.pathname)},!0)}}},St=function(s,c){var o="000000000"+s;return o.substr(o.length-c)},cn=typeof window=="object"?window:self,ln=0;for(var na in cn)Object.hasOwnProperty.call(cn,na)&&ln++;var ra=navigator.mimeTypes?navigator.mimeTypes.length:0,aa=St((ra+navigator.userAgent.length).toString(36)+ln.toString(36),4),dn=function(){return aa},Xe=0,Et=4,st=36,fn=Math.pow(st,Et);function pn(){return St((Math.random()*fn<<0).toString(st),Et)}function ia(){return Xe=Xe<fn?Xe:0,Xe++,Xe-1}function gn(){var t="c",s=new Date().getTime().toString(st),c=St(ia().toString(st),Et),o=dn(),d=pn()+pn();return t+s+c+o+d}gn.fingerprint=dn;var sa=gn,hn="bugsnag-anonymous-id",oa=function(t){try{var s=t.localStorage,c=s.getItem(hn);return c&&/^c[a-z0-9]{20,32}$/.test(c)||(c=sa(),s.setItem(hn,c)),c}catch{}},ua=function(t,s){return t===void 0&&(t=navigator),s===void 0&&(s=window),{load:function(c){var o={locale:t.browserLanguage||t.systemLanguage||t.userLanguage||t.language,userAgent:t.userAgent};s&&s.screen&&s.screen.orientation&&s.screen.orientation.type?o.orientation=s.screen.orientation.type:s&&s.document&&(o.orientation=s.document.documentElement.clientWidth>s.document.documentElement.clientHeight?"landscape":"portrait"),c._config.generateAnonymousId&&(o.id=oa(s)),c.addOnSession(function(d){d.device=C({},d.device,o),c._config.collectUserIp||mn(d)}),c.addOnError(function(d){d.device=C({},d.device,o,{time:new Date}),c._config.collectUserIp||mn(d)},!0)},configSchema:{generateAnonymousId:{validate:function(c){return c===!0||c===!1},defaultValue:function(){return!0},message:"should be true|false"}}}},mn=function(t){var s=t.getUser();(!s||!s.id)&&t.setUser(t.device.id)},ca=function(t){return t===void 0&&(t=window),{load:function(s){s.addOnError(function(c){c.request&&c.request.url||(c.request=C({},c.request,{url:t.location.href}))},!0)}}},la={load:function(t){t._sessionDelegate=da}},da={startSession:function(t,s){var c=t;return c._session=s,c._pausedSession=null,c._config.enabledReleaseStages!==null&&!u(c._config.enabledReleaseStages,c._config.releaseStage)?(c._logger.warn("Session not sent due to releaseStage/enabledReleaseStages configuration"),c):(c._delivery.sendSession({notifier:c._notifier,device:s.device,app:s.app,sessions:[{id:s.id,startedAt:s.startedAt,user:s._user}]}),c)},resumeSession:function(t){return t._session?t:t._pausedSession?(t._session=t._pausedSession,t._pausedSession=null,t):t.startSession()},pauseSession:function(t){t._pausedSession=t._session,t._session=null}},fa={load:function(t){t._config.collectUserIp||t.addOnError(function(s){s._user&&typeof s._user.id>"u"&&delete s._user.id,s._user=C({id:"[REDACTED]"},s._user),s.request=C({clientIp:"[REDACTED]"},s.request)})},configSchema:{collectUserIp:{defaultValue:function(){return!0},message:"should be true|false",validate:function(t){return t===!0||t===!1}}}},vn={};vn.load=function(t){var s=/^(local-)?dev(elopment)?$/.test(t._config.releaseStage);s||!t._isBreadcrumbTypeEnabled("log")||I(pa,function(c){var o=console[c];console[c]=function(){for(var d=arguments.length,g=new Array(d),m=0;m<d;m++)g[m]=arguments[m];t.leaveBreadcrumb("Console output",a(g,function(w,b,R){var k="[Unknown value]";try{k=String(b)}catch{}if(k==="[object Object]")try{k=JSON.stringify(b)}catch{}return w["["+R+"]"]=k,w},{severity:c.indexOf("group")===0?"log":c}),"log"),o.apply(console,g)},console[c]._restore=function(){console[c]=o}})};var pa=i(["log","debug","info","warn","error"],function(t){return typeof console<"u"&&typeof console[t]=="function"}),yn=200,_n=5e5,ga=function(t,s){return t===void 0&&(t=document),s===void 0&&(s=window),{load:function(c){if(!c._config.trackInlineScripts)return;var o=s.location.href,d="",g=!!t.attachEvent,m=g?t.readyState==="complete":t.readyState!=="loading",w=function(){return t.documentElement.outerHTML};d=w();var b=t.onreadystatechange;t.onreadystatechange=function(){t.readyState==="interactive"&&(d=w(),m=!0);try{b.apply(this,arguments)}catch{}};var R=null,k=function(M){R=M},D=function(){var M=t.currentScript||R;if(!M&&!m){var H=t.scripts||t.getElementsByTagName("script");M=H[H.length-1]}return M},L=function(M){(!m||!d)&&(d=w());var H=["<!-- DOC START -->"].concat(d.split(`
`)),se=M-1,re=Math.max(se-3,0),ge=Math.min(se+3,H.length);return a(H.slice(re,ge),function(le,Je,It){return le[re+1+It]=Je.length<=yn?Je:Je.substr(0,yn),le},{})};c.addOnError(function(M){M.errors[0].stacktrace=i(M.errors[0].stacktrace,function(le){return!/__trace__$/.test(le.method)});var H=M.errors[0].stacktrace[0],se=function(le){return le.replace(/#.*$/,"").replace(/\?.*$/,"")};if(!(H&&H.file&&se(H.file)!==se(o))){var re=D();if(re){var ge=re.innerHTML;M.addMetadata("script","content",ge.length<=_n?ge:ge.substr(0,_n)),H&&H.lineNumber&&(H.code=L(H.lineNumber))}}},!0);var $=I(["setTimeout","setInterval","setImmediate","requestAnimationFrame"],function(M){return bt(s,M,function(H){return Y(H,function(se){return{get:function(){return se[0]},replace:function(re){se[0]=re}}})})}),j=$[0];I(["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],function(M){!s[M]||!s[M].prototype||!Object.prototype.hasOwnProperty.call(s[M].prototype,"addEventListener")||(bt(s[M].prototype,"addEventListener",function(H){return Y(H,Sn)}),bt(s[M].prototype,"removeEventListener",function(H){return Y(H,Sn,!0)}))});function Y(M,H,se){return se===void 0&&(se=!1),function(){var re=[].slice.call(arguments);try{var ge=H(re),le=ge.get();if(se&&M.apply(this,re),typeof le!="function")return M.apply(this,re);if(le.__trace__)ge.replace(le.__trace__);else{var Je=D();le.__trace__=function(){k(Je),j(function(){k(null)},0);var Ca=le.apply(this,arguments);return k(null),Ca},le.__trace__.__trace__=le.__trace__,ge.replace(le.__trace__)}}catch{}if(M.apply)return M.apply(this,re);switch(re.length){case 1:return M(re[0]);case 2:return M(re[0],re[1]);default:return M()}}}},configSchema:{trackInlineScripts:{validate:function(c){return c===!0||c===!1},defaultValue:function(){return!0},message:"should be true|false"}}}};function bt(t,s,c){var o=t[s];if(!o)return o;var d=c(o);return t[s]=d,o}function Sn(t){var s=!!t[1]&&typeof t[1].handleEvent=="function";return{get:function(){return s?t[1].handleEvent:t[1]},replace:function(c){s?t[1].handleEvent=c:t[1]=c}}}var ha=function(t){return t===void 0&&(t=window),{load:function(s){"addEventListener"in t&&s._isBreadcrumbTypeEnabled("user")&&t.addEventListener("click",function(c){var o,d;try{o=va(c.target),d=En(c.target,t)}catch{o="[hidden]",d="[hidden]",s._logger.error("Cross domain error when tracking click event. See docs: https://tinyurl.com/yy3rn63z")}s.leaveBreadcrumb("UI click",{targetText:o,targetSelector:d},"user")},!0)}}},ma=/^\s*([^\s][\s\S]{0,139}[^\s])?\s*/;function va(t){var s=t.textContent||t.innerText||"";return!s&&(t.type==="submit"||t.type==="button")&&(s=t.value),s=s.replace(ma,"$1"),s.length>140?s.slice(0,135)+"(...)":s}function En(t,s){var c=[t.tagName];if(t.id&&c.push("#"+t.id),t.className&&t.className.length&&c.push("."+t.className.split(" ").join(".")),!s.document.querySelectorAll||!Array.prototype.indexOf)return c.join("");try{if(s.document.querySelectorAll(c.join("")).length===1)return c.join("")}catch{return c.join("")}if(t.parentNode.childNodes.length>1){var o=Array.prototype.indexOf.call(t.parentNode.childNodes,t)+1;c.push(":nth-child("+o+")")}return s.document.querySelectorAll(c.join("")).length===1?c.join(""):t.parentNode?En(t.parentNode,s)+" > "+c.join(""):c.join("")}var bn={};bn=function(t){t===void 0&&(t=window);var s={load:function(c){if("addEventListener"in t&&c._isBreadcrumbTypeEnabled("navigation")){var o=function(d){return function(){return c.leaveBreadcrumb(d,{},"navigation")}};t.addEventListener("pagehide",o("Page hidden"),!0),t.addEventListener("pageshow",o("Page shown"),!0),t.addEventListener("load",o("Page loaded"),!0),t.document.addEventListener("DOMContentLoaded",o("DOMContentLoaded"),!0),t.addEventListener("load",function(){return t.addEventListener("popstate",o("Navigated back"),!0)}),t.addEventListener("hashchange",function(d){var g=d.oldURL?{from:ot(d.oldURL,t),to:ot(d.newURL,t),state:wn(t)}:{to:ot(t.location.href,t)};c.leaveBreadcrumb("Hash changed",g,"navigation")},!0),t.history.replaceState&&An(c,t.history,"replaceState",t),t.history.pushState&&An(c,t.history,"pushState",t)}}};return s};var ot=function(t,s){var c=s.document.createElement("A");return c.href=t,""+c.pathname+c.search+c.hash},ya=function(t,s,c,o){var d=ot(t.location.href,t);return{title:c,state:s,prevState:wn(t),to:o||d,from:d}},An=function(t,s,c,o){var d=s[c];s[c]=function(g,m,w){t.leaveBreadcrumb("History "+c,ya(o,g,m,w),"navigation"),typeof t.resetEventCount=="function"&&t.resetEventCount(),t._config.autoTrackSessions&&t.startSession(),d.apply(s,[g,m].concat(w!==void 0?w:[]))}},wn=function(t){try{return t.history.state}catch{}},Ve="request",_a=function(t,s){t===void 0&&(t=[]),s===void 0&&(s=window);var c={load:function(o){if(!o._isBreadcrumbTypeEnabled("request"))return;var d=[o._config.endpoints.notify,o._config.endpoints.sessions].concat(t);g(),b();function g(){if("addEventListener"in s.XMLHttpRequest.prototype){var D=s.XMLHttpRequest.prototype.open;s.XMLHttpRequest.prototype.open=function($,j){var Y=this,M=!1,H=function(){return w($,j)},se=function(){return m($,j,Y.status)};M&&(this.removeEventListener("load",se),this.removeEventListener("error",H)),this.addEventListener("load",se),this.addEventListener("error",H),M=!0,D.apply(this,arguments)}}}function m(D,L,$){if(L===void 0){o._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.");return}if(!(typeof L=="string"&&u(d,L.replace(/\?.*$/,"")))){var j={status:$,request:D+" "+L};$>=400?o.leaveBreadcrumb("XMLHttpRequest failed",j,Ve):o.leaveBreadcrumb("XMLHttpRequest succeeded",j,Ve)}}function w(D,L){if(L===void 0){o._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.");return}typeof L=="string"&&u(d,L.replace(/\?.*$/,""))||o.leaveBreadcrumb("XMLHttpRequest error",{request:D+" "+L},Ve)}function b(){if(!(!("fetch"in s)||s.fetch.polyfill)){var D=s.fetch;s.fetch=function(){var $=arguments,j=arguments[0],Y=arguments[1],M,H=null;return j&&typeof j=="object"?(H=j.url,Y&&"method"in Y?M=Y.method:j&&"method"in j&&(M=j.method)):(H=j,Y&&"method"in Y&&(M=Y.method)),M===void 0&&(M="GET"),new Promise(function(se,re){D.apply(void 0,$).then(function(ge){R(ge,M,H),se(ge)}).catch(function(ge){k(M,H),re(ge)})})}}}var R=function(D,L,$){var j={status:D.status,request:L+" "+$};D.status>=400?o.leaveBreadcrumb("fetch() failed",j,Ve):o.leaveBreadcrumb("fetch() succeeded",j,Ve)},k=function(D,L){o.leaveBreadcrumb("fetch() error",{request:D+" "+L},Ve)}}};return c},Sa={load:function(t){var s=0;t.addOnError(function(c){if(s>=t._config.maxEvents)return t._logger.warn("Cancelling event send due to maxEvents per session limit of "+t._config.maxEvents+" being reached"),!1;s++}),t.resetEventCount=function(){s=0}},configSchema:{maxEvents:{defaultValue:function(){return 10},message:"should be a positive integer â‰¤100",validate:function(t){return y(1,100)(t)}}}},At={};At={load:function(t){t.addOnError(function(s){var c=a(s.errors,function(o,d){return o.concat(d.stacktrace)},[]);I(c,function(o){o.file=Ea(o.file)})})}};var Ea=At._strip=function(t){return typeof t=="string"?t.replace(/\?.*$/,"").replace(/#.*$/,""):t},ba=function(t,s){return t===void 0&&(t=window),s===void 0&&(s="window onerror"),{load:function(c){if(!c._config.autoDetectErrors||!c._config.enabledErrorTypes.unhandledExceptions)return;function o(g,m,w,b,R){if(w===0&&/Script error\.?/.test(g))c._logger.warn("Ignoring cross-domain or eval script error. See docs: https://tinyurl.com/yy3rn63z");else{var k={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},D;if(R)D=c.Event.create(R,!0,k,s,1),In(D.errors[0].stacktrace,m,w,b);else if(typeof g=="object"&&g!==null&&(!m||typeof m!="string")&&!w&&!b&&!R){var L=g.type?"Event: "+g.type:"Error",$=g.message||g.detail||"";D=c.Event.create({name:L,message:$},!0,k,s,1),D.originalError=g,D.addMetadata(s,{event:g,extraParameters:m})}else D=c.Event.create(g,!0,k,s,1),In(D.errors[0].stacktrace,m,w,b);c._notify(D)}typeof d=="function"&&d.apply(this,arguments)}var d=t.onerror;t.onerror=o}}},In=function(t,s,c,o){t[0]||t.push({});var d=t[0];!d.file&&typeof s=="string"&&(d.file=s),!d.lineNumber&&wt(c)&&(d.lineNumber=c),d.columnNumber||(wt(o)?d.columnNumber=o:window.event&&wt(window.event.errorCharacter)&&(d.columnNumber=window.event.errorCharacter))},wt=function(t){return typeof t=="number"&&String.call(t)!=="NaN"},Aa=function(t){t===void 0&&(t=window);var s={load:function(c){if(!(!c._config.autoDetectErrors||!c._config.enabledErrorTypes.unhandledRejections)){var o=function(d){var g=d.reason,m=!1;try{d.detail&&d.detail.reason&&(g=d.detail.reason,m=!0)}catch{}var w=c.Event.create(g,!1,{severity:"error",unhandled:!0,severityReason:{type:"unhandledPromiseRejection"}},"unhandledrejection handler",1,c._logger);m&&I(w.errors[0].stacktrace,wa(g)),c._notify(w,function(b){if(at(b.originalError)&&!b.originalError.stack){var R;b.addMetadata("unhandledRejection handler",(R={},R[Object.prototype.toString.call(b.originalError)]={name:b.originalError.name,message:b.originalError.message,code:b.originalError.code},R))}})};"addEventListener"in t?t.addEventListener("unhandledrejection",o):t.onunhandledrejection=function(d,g){o({detail:{reason:d,promise:g}})}}}};return s},wa=function(t){return function(s){s.file!==t.toString()&&s.method&&(s.method=s.method.replace(/^\s+/,""))}},xe={},Ia="Bugsnag JavaScript",Pa="7.25.0",Ta="https://github.com/bugsnag/bugsnag-js",La=C({},E.schema,P),ce={_client:null,createClient:function(t){typeof t=="string"&&(t={apiKey:t}),t||(t={});var s=[ea,ua(),ta(),ca(),Sa,la,fa,At,ba(),Aa(),bn(),ha(),_a(),vn,ga()],c=new yt(t,La,s,{name:Ia,version:Pa,url:Ta});return c._setDelivery(window.XDomainRequest?_t:Yr),c._logger.debug("Loaded!"),c.leaveBreadcrumb("Bugsnag loaded",{},"state"),c._config.autoTrackSessions?c.startSession():c},start:function(t){return ce._client?(ce._client._logger.warn("Bugsnag.start() was called more than once. Ignoring."),ce._client):(ce._client=ce.createClient(t),ce._client)},isStarted:function(){return ce._client!=null}};return I(["resetEventCount"].concat(v(yt.prototype)),function(t){/^_/.test(t)||(ce[t]=function(){if(!ce._client)return console.log("Bugsnag."+t+"() was called before Bugsnag.start()");ce._client._depth+=1;var s=ce._client[t].apply(ce._client,arguments);return ce._client._depth-=1,s})}),xe=ce,xe.Client=yt,xe.Event=pt,xe.Session=mt,xe.Breadcrumb=q,xe.default=ce,xe})}(Pt)),Pt.exports}var Tt,Bn;function Fs(){return Bn||(Bn=1,Tt=Ms()),Tt}var xs=Fs();const qs=nr(xs),Us=qs;function He(n,e){n.addMetadata("bugsnag",{shouldSend:e})}function $s(n){return function(r){He(r,!0),Za(r);const a=r.request.url||"";if(!URL.canParse(a)){He(r,!1);return}const i=URL.parse(a);if(!i||Bs(i)||Vs(i)){He(r,!1);return}if(Gs(r)){He(r,!1);return}if(r.errors.some(l=>r.context==="/admin/files"&&l.errorMessage.includes("SecurityError")||ei(l.errorMessage,{pathName:window.location.pathname,errorGroup:"browser",errorClass:l.errorClass,stacktrace:l.stacktrace})||ti(r.originalError)||l.errorMessage===void 0||l.errorMessage==="undefined"||l.errorClass==="Unauthorized")){He(r,!1);return}n(r)===!1&&He(r,!1)}}function Bs(n){return n.protocol==="file:"||n.protocol==="blob:"||n.protocol==="content:"}function Vs(n){return!((n==null?void 0:n.hostname)==="admin.shopify.com"||n!=null&&n.hostname.match(/\.myshopify\.com$/))}function Gs(n){var e;return((e=n.getMetadata("unhandledrejection handler"))==null?void 0:e["non-error parameter"])==="undefined"}const Hs=/^\/signup\/([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})(\/(.*))?$/,zs=["[gtm: error] gtm iframe failed to load","[gtm: error] gtm failed to acknowledge message","Data Collector must be created with Kount and/or PayPal."],js=["ShopStatusFailError"];function Qs(n){const e=n.request.path||location.pathname;if(!(e==null?void 0:e.startsWith("/signup")))return;const a=n.originalError;if(a instanceof Error&&js.includes(a.name)){n.addMetadata("bugsnag",{shouldSend:!1});return}const i=Ks(),u=n.errors[0],{errorMessage:l=""}=u;zs.forEach(h=>{l===h&&(n.groupingHash=h)}),n.addMetadata("signup",{signupUuid:i.signupUuid,country:i.country,experimentAssignments:i.experimentAssignments,locale:i.locale,page:ni(e),phase:i.phase,sequenceSteps:i.sequenceSteps,signupTypes:i.signupTypes});const[,f]=e.match(Hs)||[];n.request.path=e.replace(f,":signup_uuid")}function Ks(){const n=document.querySelector('[data-serialized-id="signup-context"]'),e=n==null?void 0:n.textContent;try{return e?JSON.parse(e):{}}catch{return{}}}function Ws(n){var e;return!!(n&&((e=n.extraInfo)!=null&&e.operation))}function Xs(){var r;if(typeof window>"u"||!((r=window.navigator)!=null&&r.userAgent))return!0;const{isSafari:n,isFirefox:e}=new ar({userAgent:window.navigator.userAgent});return n||e}function Js(n){var e,r;for(const a of n.errors){const i=n.originalError;if(!lt(i)||i.cause)return;if(Ws(i))a.errorClass=`QueryError:${i.extraInfo.operation}`;else if(rr((e=i.graphQLErrors[0])==null?void 0:e.originalError)){const u=URL.parse((r=i.graphQLErrors[0])==null?void 0:r.originalError.response.url);u&&(a.errorClass=`QueryError:${u.searchParams.get("operation")}`)}Xs()&&(n.groupingHash=a.errorClass)}}const Ys=[/^Connection is closing because of: IO error: .*/];function Zs(n){const e=n.errors.at(0);if(e&&(!e.stacktrace||e.stacktrace.length===0)){for(const r of Ys)if(r.test(e.errorMessage)){n.groupingHash=`${e.errorClass}:${r.source}`;return}n.groupingHash=`${e.errorClass}:${e.errorMessage}`}}const eo=["The play() request was interrupted because the media was removed from the document. https://goo.gl/LdLk22","Error: Syntax not recognized - Unsupported visualization type Source: ANTLR Transformer Range: 19:24 - 19:34"];function to(n){const e=n.errors[0],{errorMessage:r=""}=e;eo.forEach(a=>{r===a&&(n.groupingHash=a)})}const Vn="UNKNOWN_ERROR",Gn="UNKNOWN_PATH";function no(n){const e=n.networkError;if(rr(e))return`[HTTP/${e.statusCode}]`;const r=new Set(n.graphQLErrors.map(({extensions:l})=>(l==null?void 0:l.code)??Vn)),a=new Set(n.graphQLErrors.map(({path:l})=>(l==null?void 0:l.at(-1))||Gn)),i=r.size?[...r]:[Vn],u=a.size?[...a]:[Gn];return i.length===1?`[${i[0]}@${u.join(",")}]`:`[MIXED_ERRORS@${u.length===1?u[0]:"MIXED_PATHS"}]`}function ro(n,e){return lt(e)?`${n.errorClass}${no(e)}`:n.errorClass}function hr(n){if(!n.cause){for(const e of n.graphQLErrors)if(e.cause){n.cause=e.cause;break}}}const ao="https://cdn.shopify.com/s/assets",io="webpack:///client/bugsnag",so="https://error-analytics-production.shopifysvc.com",oo="https://error-analytics-sessions-production.shopifysvc.com",Oe=Gt(),uo=n=>async e=>{const r=e.getMetadata("custom")??{},{sliceName:a,routeId:i,targetNormalizedPathname:u,errorBoundary:l}=r,f=e.getMetadata("bugsnag")??{},{shouldSend:h}=f,v={sliceName:a,routeId:i,targetNormalizedPathname:u,errorBoundary:l,notifiedBugsnag:h},y=e.originalError instanceof Error?e.originalError:void 0;n.log("error","Error captured",{...v,errorMessage:(y==null?void 0:y.message)??e.errors[0].errorMessage,errorName:(y==null?void 0:y.name)??e.errors[0].errorClass,errorStack:(y==null?void 0:y.stack)??""}),n.record(J.AppError,1,v);for(const A of e.errors){const S=So(A.stacktrace,e.request.url);S>0&&n.log("info","Suspicious error captured",{errorMessage:A.errorMessage,errorStack:(y==null?void 0:y.stack)||"",totalFrameCount:A.stacktrace.length,suspiciousFrameCount:S})}},{supported:co}=(Oe==null?void 0:Oe.browser)??{},{apiKey:mr,appVersion:lo,releaseStage:Lt}=(Oe==null?void 0:Oe.bugsnag)??{},fo=co?$s(yo):()=>!1,Ut=n=>{const e=n.getMetadata("bugsnag")??{},{shouldSend:r}=e;if(!r)return!1},vr={apiKey:mr,autoTrackSessions:!0,trackInlineScripts:!1,releaseStage:Lt,appVersion:lo,enabledErrorTypes:{unhandledExceptions:!0,unhandledRejections:!0},enabledBreadcrumbTypes:["error","manual","navigation","user"],enabledReleaseStages:/^(production|canary|performance|staging-(\w+)|([\w-]+)-(production|tiny))$/.test(Lt)?[Lt]:[],maxBreadcrumbs:40,onError:fo,endpoints:{notify:so,sessions:oo}};vr.logger=null;const yr=n=>{const e=n.reason;e instanceof Error&&Sr(e)&&hr(e)};window.addEventListener("unhandledrejection",yr);const B=mr?Us.createClient(vr):null;B==null||B.addOnError(Ut);if(navigator.connection){const{downlink:n,effectiveType:e,rtt:r,type:a,saveData:i}=navigator.connection;B==null||B.addMetadata("connection",{downlink:n,effectiveType:e,rtt:r,type:a,saveData:i})}const{sessionId:po,requestDetails:go,enabledBetas:ho,isShopifyStaff:mo}=Gt()??{};_r({...go,enabledBetas:ho,sessionId:po,isShopifyStaff:mo});const vo=K(({ensure:n,registerCleanup:e})=>{e(()=>window.removeEventListener("unhandledrejection",yr));const r={leaveBreadcrumb(a,i,u){B==null||B.leaveBreadcrumb(a,i,u)},notify(a,i){const u=i||{},l=u.metaData||{};if(ai(a),Sr(a)){hr(a);const{graphQLErrors:h=[]}=a;l.graphQL=h.reduce((v,y,A)=>(v[A+1]=JSON.stringify(y),v),{})}const f=B==null?void 0:B.Event.create(a,!0,{severity:u.severity||"warning",unhandled:!1,severityReason:{type:"handledException"}},"notify()",2);f&&(l&&Object.keys(l).length!==0&&Object.keys(l).forEach(h=>{h==="react"?f.addMetadata("react",l[h]):f.addMetadata("custom",{[h]:l[h]})}),B==null||B._notify(f))},addOnError(a){return B==null||B.addOnError(a),()=>{B==null||B.removeOnError(a)}},setFlags(a){Er(a)},updateMetadata(a){_r(a)},clearMetadata(){B==null||B.clearMetadata("user")}};return ri(r.notify),n(["flags"]).then(({flags:a})=>{e(Ke(()=>r.setFlags(a.enabled)))}).catch(a=>{throw a}),n(["requestDetails"]).then(({requestDetails:a})=>{r.updateMetadata(a)}).catch(a=>{throw a}),n(["instrumentation"]).then(({instrumentation:a})=>{const i=r.addOnError(u=>{const l=u.getMetadata("bugsnag")??{};(u.getMetadata("custom")??{}).errorBoundary==="router"&&a.setPageViewErrorReported(l.shouldSend)});e(i)}).catch(a=>{throw a}),n(["router","metrics"]).then(({router:a,metrics:i})=>{B==null||B.removeOnError(Ut);const u=r.addOnError(h=>{const v=_o(a,h.originalError);h.addMetadata("custom",v)});e(u);const l=r.addOnError(uo(i));e(l);const f=r.addOnError(Ut);e(f)}).catch(a=>{throw a}),r});function _r(n){const{shop:e,staffMember:r,isShopifyStaff:a,sessionId:i,enabledBetas:u=[]}=n,l=ir()?Dt():void 0,f={shopId:e==null?void 0:e.shopId,shopDomain:e==null?void 0:e.shopDomain,userId:r==null?void 0:r.userId,userUuid:l,isShopifyEmployee:a??(e==null?void 0:e.isShopifyEmployee),sessionId:i};B==null||B.addMetadata("user",f),B==null||B.addMetadata("error_source",{shop_id:e==null?void 0:e.shopId}),B==null||B.setUser(l),Er(u)}function Sr(n){return!!n&&Array.isArray(n.graphQLErrors)}function Er(n){B==null||B.clearFeatureFlags(),B==null||B.addFeatureFlags(n.map(e=>({name:e})))}function yo(n){const e=n.errors.find(y=>y.errorMessage.endsWith("QueryError")||y.errorMessage==="UseMutationError");if(e){const y=e.errorMessage;e.errorMessage=`${y}: ${n.originalError.message}`}n.addMetadata("errors",{errors:n.errors.map(y=>({type:y.type,class:y.errorClass,message:y.errorMessage,stacktrace:y.stacktrace}))});const r=document.location.pathname.replace(/(^\/|\/$)/g,""),a=()=>r.startsWith("signup")?0:ir()?2:1,i=r.split("/").slice(a()),[u="home",l]=i,f=u==="settings"&&l?l:u;let h;const v=n.errors.every(y=>y.stacktrace.every(({file:A})=>A.startsWith(ao)||A.startsWith(io)||A.startsWith("global code")||A.startsWith("undefined")||A.startsWith("[native code]")));i.length<=1?h="index":l?l==="new"?h="new":/^\d+$/.test(l)?h="show":h="unknown":h="unknown",Zs(n),Js(n),to(n),Qs(n),n.errors.forEach(y=>{y.errorClass=ro(y,n.originalError)}),n.addMetadata("app",{adminAction:h,adminSection:f,adminNext:v,reactRouter7Enabled:(Oe==null?void 0:Oe.reactRouter7Enabled)??!1})}function _o(n,e){const r=n.getRouteInfo();let a,i=e;for(;!a&&i;)a=ii(i),i=i.cause;const u=a?n.getRouteInfo(a):void 0,l=(u==null?void 0:u.sliceName)??(r==null?void 0:r.sliceName)??"unknown",f=(u==null?void 0:u.sliceId)??(r==null?void 0:r.sliceId)??"unknown",h=a??(r==null?void 0:r.manifestRouteId)??"unknown",v=(u==null?void 0:u.pathPattern)??(r==null?void 0:r.pathPattern)??"unknown";return{sliceName:l,routeId:h,targetNormalizedPathname:v,callerSliceName:u?r==null?void 0:r.sliceName:void 0,callerRouteId:u?r==null?void 0:r.manifestRouteId:void 0,slice_name:l,slice_id:f}}function So(n,e){let r=0;for(const a of n)(a.file===""||a.file===e||a.file==="global code")&&r++;return r}function Eo(n,e){return e?n.filter((a,i)=>i<e.length&&e[i]):[]}async function br(n){var r;const{data:e}=await n.query(si,{variables:{betaNames:kn}});return Eo(kn,(r=e==null?void 0:e.shop)==null?void 0:r.enabledFlags)}async function bo({noShopContext:n,enabledBetas:e,graphqlLite:r,isDevelopment:a}){return n?[]:e??await br(r)}const Ao=K(async({url:n,ensure:e,graphqlLite:r,ensureSync:a,serverData:i,unified:u,currentOrganization:l})=>{const f=!u.storeHandle&&!i.enabledBetas||!!l,h=U([]),v=U(await bo({isDevelopment:Ft,noShopContext:f,enabledBetas:i.enabledBetas,graphqlLite:r})),y=Q(()=>Array.from(h.value.reduce((E,T)=>(E.has(T)?E.delete(T):E.add(T),E),new Set(v.value)))),A=Q(()=>new Set(y.value));if(!f){const{requestDetails:E}=await e(["requestDetails"]),{isShopifyEmployee:T,isStaffShop:C}=E.shop;try{(T||C||zt(n.hostname)||Ft)&&(h.value=oi())}catch{}}function S(E,T){const{router:C}=a(["router"]);if(C.revalidate(),E.filter(p=>!T.includes(p)).concat(T.filter(p=>!E.includes(p))).some(p=>di(p))){const{assets:p}=a(["assets"]);p.forceReloadAssets()}}return{async refetch(){if(f)return;const E=v.value;v.value=await br(r),S(v.value,E)},get overrides(){return h.value},get enabled(){return y.value},get(E){return A.value.has(E)},update(E){const T=v.value;v.value=E,S(E,T)},updateOverrides(E){const T=h.value,C=E.map(I=>ci(I)).filter(I=>I!==void 0);h.value=C,li(C),S(E,T)},clearOverrides(){const E=h.value;h.value=[],ui(),S([],E)}}}),et="admin_react_permission_diagnostics",wo=K(async({url:n,ensure:e,ensureSync:r})=>{const{requestDetails:a}=await e(["requestDetails"]),i=U([]),u=U(a.permissions),l=Q(()=>{const y=Array.from(i.value.reduce((A,S)=>(A.has(S)?A.delete(S):A.add(S),A),new Set(u.value)));return new fi(y)}),{isShopifyEmployee:f,isStaffShop:h}=a.shop;try{if((f||h||zt(n.hostname)||Ft)&&ye.get(et)){const y=String(ye.get(et)).split(",");i.value=y.filter(A=>l.value.include(A))}}catch{}function v(y,A){const{router:S}=r(["router"]);if(S.revalidate(),y.filter(T=>!A.includes(T)).concat(A.filter(T=>!y.includes(T))).some(T=>pi(T))){const{assets:T}=r(["assets"]);T.forceReloadAssets()}}return{get overrides(){return i.value},get enabled(){return l.value},include(y){return l.value.include(y)},missing(y){return l.value.missing(y)},update(y){const A=u.value;u.value=y,v(y,A)},updateOverrides(y){const A=i.value;i.value=y,y.length>0?ye.set(et,y.join(","),{path:"/"}):ye.remove(et,{path:"/"}),v(y,A)},clearOverrides(){const y=i.value;i.value=[],ye.remove(et,{path:"/"}),v([],y)}}}),Ct="admin_react_search_eval_diagnostics",Io=K(({url:n,ensure:e})=>{const r=U(!1);return e(["requestDetails"]).then(({requestDetails:a})=>{const{isShopifyEmployee:i}=a.shop;try{(i||zt(n.hostname))&&(r.value=String(ye.get(Ct))==="1")}catch{}}).catch(a=>{}),{get searchRatingEnabled(){return r.value},toggleSearchRatingEnabled(){r.value=!r.value,r.value?ye.set(Ct,"1",{path:"/"}):ye.remove(Ct,{path:"/"})}}}),Po={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"OrganizationContext"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"organization"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"featureSet"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPlus"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"organizationPermissions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"userLimits"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"enforced"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"maxAllowed"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"used"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:169,source:{name:"GraphQL request",locationOffset:{line:1,column:1}}},id:"6de5f5ae47c8157f70dfb0999d51832e6b7931ac52dbcb341f55e6902d39bc03"},Ar={enforced:!1,maxAllowed:0,used:0},To=K(async({ensure:n,errorLogger:e,currentOrganization:r,serverData:a,registerCleanup:i})=>{var l;if(!a.isUnifiedApp)return null;if(!r){const{shopFeatures:f}=await n(["shopFeatures"]);if(!f.hasOrgSettings&&!f.rbacEnabled)return null}const{organizationGraphql:u}=await n(["organizationGraphql"]);try{const{data:f,error:h}=await u.query({query:Po,fetchPolicy:"network-only"});h&&e.notify(h);const v=f==null?void 0:f.organization,y=(l=v==null?void 0:v.currentUser)==null?void 0:l.organizationPermissions,A=(v==null?void 0:v.featureSet)||[],S=[],E=Lo(v),{sessionId:T,isShopifyStaff:C}=a??{};if(v&&e.addOnError){const I=e.addOnError(p=>{var N;p.addMetadata("organization",{organizationId:v.id,isPlus:v.isPlus??!1});const _=p.getMetadata("error_source")||{};p.addMetadata("error_source",{..._,organizationId:v.id});const P=p.getMetadata("user")||{};p.addMetadata("user",{...P,organizationUserID:(N=v.currentUser)==null?void 0:N.id,sessionId:T,isShopifyEmployee:C})});i(I)}if(y){const I=Object.values(gi);for(const p of y){const _=p.toUpperCase();I.includes(_)&&S.push(_)}}return{features:A,permissions:S,userLimits:E,isPlus:(v==null?void 0:v.isPlus)??!1}}catch(f){if(lt(f)&&Co(f)){const{metrics:h}=await n(["metrics"]);return h.log("error","OrganizationContextAccessDeniedError",{message:f.message}),null}throw f}});function Lo(n){return n!=null&&n.userLimits?{enforced:!!n.userLimits.enforced,maxAllowed:n.userLimits.maxAllowed,used:n.userLimits.used}:Ar}function Co(n){const{graphQLErrors:e}=n;return e?e.some(r=>{var a;if(((a=r.extensions)==null?void 0:a.code)==="ACCESS_DENIED")return!0}):!1}const No=new Set(["products:list","products:update","products:variants:update","market:graph"]),ko=K(n=>{const e=Q(()=>{var r;try{const a=n.router.currentRoute,i=n.router.matchRoutes(a.pathname),u=(r=i==null?void 0:i.at(-1))==null?void 0:r.route;return No.has((u==null?void 0:u.id)||"")}catch{return!1}});return{get supportsContextualCommerce(){return e.value}}}),Ro={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"OrganizationFlags"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"flagHandles"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"organization"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enabledFlags"},arguments:[{kind:"Argument",name:{kind:"Name",value:"flagHandles"},value:{kind:"Variable",name:{kind:"Name",value:"flagHandles"}}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:115,source:{name:"GraphQL request",locationOffset:{line:1,column:1}}},id:"d6a06cb7ba6f2a81e1571143ad0b87f4c5d65a4971b3bd35d3fee5db661cc3ef"};function Oo(n,e=sr){const r=[];return e.forEach((a,i)=>{if(i<n.length&&n[i]){const u=hi(a);u&&r.push(u)}}),r}const Do=K(async({ensure:n,errorLogger:e,currentOrganization:r,serverData:a,registerCleanup:i})=>{var l;if(!a.isUnifiedApp)return[];if(!r){const{shopFeatures:f}=await n(["shopFeatures"]);if(!f.hasOrgSettings&&!f.rbacEnabled)return[]}const{organizationGraphql:u}=await n(["organizationGraphql"]);try{const{data:f,error:h}=await u.query({query:Ro,fetchPolicy:"network-only",variables:{flagHandles:sr.map(y=>y.toString())}});h&&e.notify(h);const v=Oo(((l=f.organization)==null?void 0:l.enabledFlags)||[]);if(v&&e.addOnError){const y=e.addOnError(A=>{A.addMetadata("organizationFlags",v)});i(y)}return v}catch(f){if(lt(f)&&Mo(f)){const{metrics:h}=await n(["metrics"]);return h.log("error","OrganizationFlagsAccessDeniedError",{message:f.message}),[]}throw f}});function Mo(n){const{graphQLErrors:e}=n;return e?e.some(r=>{var a;if(((a=r.extensions)==null?void 0:a.code)==="ACCESS_DENIED")return!0}):!1}const Fo=1e3*60*60*24,xo=1e3*60,qo=K(({registerCleanup:n})=>{const e=U(!1),r=()=>{e.value=!0},a=Date.now(),i=setInterval(()=>{Date.now()-a>Fo&&(r(),clearInterval(i))},xo);return n(()=>{clearInterval(i)}),{get shouldReloadAssets(){return e.value},forceReloadAssets:r}}),Uo=K(n=>{const e=U({}),r=U({});return{get forms(){return e.value},registerForm(a,i){const u=n.router.getRouteId();if(!u)return;const l=(i==null?void 0:i.modality)===Re.PAGE_STACK?`${u}:${i==null?void 0:i.id}`:u;e.value={...e.value,[l]:{...e.value[l],[a.name]:a}}},unregisterForm(a,i){const u=n.router.getRouteId();if(!u)return;const l=(i==null?void 0:i.modality)===Re.PAGE_STACK?`${u}:${i==null?void 0:i.id}`:u,f=e.value[l];!f||!(a in f)||(delete f[a],e.value={...e.value,[l]:f})},cleanupActivityForms(a){const i={...e.value};for(const u in i)u.endsWith(`:${a}`)&&delete i[u];e.value=i},cleanupRouteForms(a){const i={...e.value};i[a]&&delete i[a],e.value=i},get activeForms(){var l,f;const a=n.router.getRouteId();if(!a)return[];const i=(f=(l=n.intents)==null?void 0:l.currentActivity)==null?void 0:f.value,u=(i==null?void 0:i.modality)===Re.PAGE_STACK?`${a}:${i.id}`:a;return Object.values(e.value[u]??{})},setPrefilledFormData(a,{data:i,source:u}){r.value={...r.value,[a]:{data:i,source:u}}},getPrefilledFormData(a){const{[a]:i,...u}=r.value;return i&&(r.value=u),i}}}),$o=K(async({ensure:n})=>{const{requestDetails:e,currentOrganization:r}=await n(["requestDetails","currentOrganization"]),a=U(r?{}:e.entitlements),i=U([]),u=Q(()=>{const f=mi(a.value);return i.value.forEach(({path:h,value:v})=>vi(f,h,v)),f});return Bo({entitlements:u,overrideHandlers:{get overrides(){return i.value},clearOverrides(){i.value=[]},updateOverride(f){const h=[...i.value],v=h.findIndex(({path:A})=>A===f.path),y=or(a.value,f.path);v===-1&&f.value!==y?h.push(f):y===f.value&&v!==-1?h.splice(v,1):h[v]=f,i.value=h}}})});function Bo({entitlements:n,overrideHandlers:e}){return new Proxy({},{get(r,a){return a in e?e[a]:or(n.value,a)},ownKeys(){return[...Object.keys(n.value),...Object.keys(e)]},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},has(r,a){return a in e||a in n.value}})}const Vo=K(()=>{const n=U(void 0),e=U(void 0),r=U(()=>{});function a(){n.value=void 0,e.value=void 0,r.value=()=>{}}return{get challengeUrl(){return n.value},get challengeTitleKey(){return e.value},startChallenge(i,u){return n.value=i,e.value=u,new Promise(l=>r.value=l)},endChallenge(i,u){if(r.value(i),i&&u){const l=yi(n.value);l&&window.location.assign(l)}a()}}}),Go=K(({serverData:n,ensure:e})=>{const a=n.isUnifiedApp?"/logout":"/admin/auth/logout";return{async perform(){const{errorLogger:i}=await e(["errorLogger"]),{deleteAllCaches:u}=await ue(async()=>{const{deleteAllCaches:l}=await import("../context-slice-graphql-DK0M30gM-m3r.js").then(f=>f.a4);return{deleteAllCaches:l}},__vite__mapDeps([0,1,2]));try{await u({lockAfterDelete:!0})}catch(l){i.notify(l)}location.assign(a)}}});function Ho(n){const{serverData:{sessionId:e},monorail:r,extensibility:a}=n,i=new Map;a.host.telemetry.addListener("host.instance.intents.*",u=>{var O;if(!(u.data.target instanceof _i))return;const l=u.data.target;i.has(l)||i.set(l,l.loadId);const f=i.get(l),h=(O=l.launchOptions.context.intent)==null?void 0:O.request,v=location.pathname,y={sessionId:e,pathname:v},A={loadId:f},S={action:h.action,type:h.type,value:h.value??""},E=u.name.replace("host.instance.intents.",""),T=u.data.eventData??"";r.produce({schemaId:"admin_intents_usage/2.0",payload:{...y,...S,...A,eventName:E,eventData:T,emittedAt:u.trackedAt.toString()}});let C,I,p;try{const V=n.ensureSync(["flags","router","metrics"]);C=V.flags,I=V.router,p=V.metrics}catch(V){n.errorLogger.notify(new Error("Failed to initialize slices for intents telemetry",{cause:V}),{metaData:{custom:{context:"intents_telemetry",eventName:E,intentAction:h.action,intentType:h.type}}});return}if(!C.get(Si))return;const _=Ei(),P=a.host.context.browser.os?String(a.host.context.browser.os).toLowerCase():"unknown",N=bi(),F=I.getRouteInfo().pathPattern??"unknown",q=h.action,x=h.type;p.record(J.AdminIntentsEvent,1,{eventName:E,intentAction:q,intentType:x,pathPattern:F,surface:_}),E==="resolved_error"&&p.log("error","Intent error",{eventName:E,intentAction:q,intentType:x,pathPattern:F,pathname:v,loadId:f,eventData:T,surface:_,os:P,appVersion:N})})}const zo=K(async n=>{if(n.currentOrganization)return jo;const{flags:e,forms:r}=await n.ensure(["flags","forms"]),a=Q(()=>e.enabled.includes(Ai)),i=U(void 0),u=n.ensure(["extensibility"]).then(({extensibility:C})=>(i.value=C.host,Ho(n),E(),C.host)),l=Q(()=>a.value&&i.value&&i.value.pluginApi.intents?i.value.pluginApi.intents.activities.value:[]),f=Q(()=>{if(a.value&&i.value&&i.value.pluginApi.intents)return i.value.pluginApi.intents.currentActivity.value}),h=Q(()=>{var _;const C=(_=n.activities)==null?void 0:_.currentActivity;return f.value||C}),v=Q(()=>a.value&&i.value&&i.value.pluginApi.intents?i.value.pluginApi.intents.inActivity.value:!1),y=Q(()=>{const C=f.value;return((C==null?void 0:C.modality)??"NONE")===Re.PAGE_STACK}),A=Q(()=>a.value&&i.value&&i.value.pluginApi.intents&&i.value.pluginApi.intents.inActivity.value?Re.PAGE_STACK:"NONE");let S=[];const E=()=>{l.subscribe(C=>{const I=C.map(_=>_.id);S.filter(_=>!I.includes(_)).forEach(_=>{r.cleanupActivityForms(_)}),S=I})};return{get enabled(){return a.value},activities:l,currentActivity:h,hostCurrentActivity:f,inActivity:v,inDialog:y,modality:A,invoke:async(C,I)=>{var F,q,x,O,V,W;const p=await u;if(await p.ready,((I==null?void 0:I.modalityOverride)??Re.PAGE_STACK)===Re.NAVIGATE){const{router:ne,activities:Z}=await n.ensure(["router","activities"]),fe=new wi(C,I),ae=await p.search([{queryIntents:fe}]),_e=ae==null?void 0:ae[0];if(_e){const Ee=((x=(q=(F=_e.manifest)==null?void 0:F.intent)==null?void 0:q.schema)==null?void 0:x.input)||{},{params:Te,formData:Le,queryParams:be,hash:Ae}=Ii(Ee,I==null?void 0:I.data),he=ne.toRoute(`route:${_e.id}`,Te),we={state:{intentFormData:Le,intentSource:(I==null?void 0:I.source)??"admin"}};return Object.keys(be).length>0||Ae?await ne.navigate({pathname:String(he),search:new URLSearchParams(be).toString(),hash:Ae,...we}):await ne.navigate(he,we),(V=(O=Z.currentActivity)==null?void 0:O.telemetry)==null||V.track("rendered",{eventData:"navigated"}),Z.currentActivity}}const P=await((W=p.pluginApi.intents)==null?void 0:W.invoke(C,{wait:!1,...I}));if(!P)return n.activities.currentActivity;const N=P.instance;if(N&&(await N.ready,N.error))throw N.error;return P},query:async(C,I)=>{var _;const p=await u;return await p.ready,((_=p.pluginApi.intents)==null?void 0:_.query(C,I))??[]}}}),jo={enabled:!1,activities:U([]),currentActivity:U(void 0),hostCurrentActivity:U(void 0),inActivity:U(!1),inDialog:U(!1),modality:U("NONE"),invoke:async()=>{throw new Error("Intents API is not available in non-shop context")},query:async()=>{throw new Error("Intents API is not available in non-shop context")}},Qo=K(n=>{const e=U(void 0),r=U(void 0),a=Q(()=>r.value??e.value);let i;function u(l){l!=null&&l.id&&n.ensure(["forms"]).then(({forms:f})=>f.cleanupActivityForms(l.id)).catch(()=>{}),e.value=new Pi({modality:Re.NAVIGATE})}return n.ensure(["router"]).then(({router:l})=>{i=`${l.currentRoute.pathname}${l.currentRoute.search}${l.currentRoute.hash}`,u(e.peek());const h=l.subscribe(v=>{if(v.navigation.state==="idle"){const y=`${v.location.pathname}${v.location.search}${v.location.hash}`;if(y===i)return;const A=a.value;i=y,u(A)}});n.registerCleanup(h)}).catch(()=>{}),n.ensure(["intents"]).then(({intents:l})=>{n.registerCleanup(Ke(()=>{const f=l.hostCurrentActivity.value,h=(f==null?void 0:f.modality)===Re.PAGE_STACK;r.value=h?f:void 0}))}).catch(()=>{}),{get currentActivity(){return a.value},get routeActivity(){return e.value}}});var Ce,Ne,ke,Pe,$t,wr,Bt;class Ko{constructor(e){Ye(this,Pe);Ye(this,Ce,new Map);Ye(this,Ne,new Map);Ye(this,ke,new Map);e&&this.register(e)}register(e){for(const[r,a]of Object.entries(e))te(this,Ne).has(r)||te(this,ke).has(r)||te(this,Ce).has(r)||(typeof a=="function"?te(this,ke).set(r,a):te(this,Ne).set(r,Ge(this,Pe,$t).call(this,a)));return this}assert(e,r){if(typeof e=="string"){if(te(this,Ne).has(e))return Ge(this,Pe,wr).call(this,te(this,Ne).get(e).assert.call(this,r));throw te(this,ke).has(e)||te(this,Ce).has(e)?new Error(`Mime type ${e} registered but not yet loaded. Make sure to call ensure() before asserting.`):new Error(`Mime type ${e} not registered.`)}if(typeof r=="object"&&r!=null&&!Array.isArray(r)){const a=[];for(const i in e){const u=e[i];let l;typeof u=="string"?l=this.assert(u,r[i]):(u.required!==!1||r[i]!=null)&&(typeof u.type=="string"&&r[i]===""?l={success:!1,errors:[{code:"custom",message:"Value is required but received an empty string",path:[]}]}:l=this.assert(u.type??"",r[i])),l!=null&&!l.success&&a.push(...Ge(this,Pe,Bt).call(this,l.errors).map(f=>(f.path.unshift(i),f)))}return a.length===0?{data:r,success:!0}:{errors:a,success:!1}}throw new Error("Invalid value")}async ensure(e){if(typeof e=="string"){if(te(this,Ne).has(e))return this;if(te(this,ke).has(e)){const r=te(this,ke).get(e);te(this,ke).delete(e),te(this,Ce).set(e,r().then(({default:a})=>(te(this,Ne).set(e,Ge(this,Pe,$t).call(this,a)),te(this,Ce).delete(e),this)))}return te(this,Ce).has(e)?te(this,Ce).get(e):this}return await Promise.all(Object.values(e).map(r=>typeof r=="string"?this.ensure(r):this.ensure(r.type??""))),this}async ensureAndAssert(e,r){return await this.ensure(e),this.assert(e,r)}}Ce=new WeakMap,Ne=new WeakMap,ke=new WeakMap,Pe=new WeakSet,$t=function(e){return e instanceof Ti?{assert:r=>e.safeParse(r)}:e},wr=function(e){return e.success?e:{success:!1,errors:Ge(this,Pe,Bt).call(this,"error"in e?e.error:e.errors)}},Bt=function(e){return e instanceof Li?e.issues:Array.isArray(e)?e:[e]};const Wo=Ue().int();function de(n){return{assert:e=>{const r=typeof e=="string"&&ur(e)&&cr(e).toLowerCase()===n.toLowerCase();return r?{success:r,data:e}:{success:r,errors:[{path:[],code:"custom",message:`Expected a GID for ${n}. Got ${e}`}]}}}}const Xo=de("Article"),Jo=de("Collection"),Yo=de("Customer"),Zo=de("Experiment"),eu=de("Catalog"),tu=de("Menu"),nu=de("MetafieldDefinition"),ru=de("Metaobject"),au=de("MetaobjectDefinition"),iu=de("Page"),su=de("Product"),ou=de("ProductVariant"),uu=de("SegmentationTemplates"),tt=oe({amount:X(),currencyCode:je(xt)}),cu=oe({active:ve(),description:X().nullable().optional(),id:ze("DeliveryMethodDefinition"),currencyCode:je(xt),freeShippingConditions:qe(oe({id:X().nullable().optional(),min:tt,subject:je(Rn)})).nullable().optional(),name:X().trim().min(1),rateGroups:qe(oe({id:ze("DeliveryRateGroup"),rateProviders:qe(oe({id:ze("DeliveryRateDefinition"),price:tt,maxTransitTime:Ue().nullable().optional(),minTransitTime:Ue(),rateRangeConditions:qe(oe({subject:je(Rn),min:Ue(),max:Ue().nullable().optional(),unit:Ci([je(xt),je(Ni)])})).nullable().optional()}).or(oe({id:ze("DeliveryParticipant"),adaptToNewServicesFlag:ve(),carrierService:oe({id:X(),name:X().nullable().optional(),label:X().nullable().optional(),formattedName:X().nullable().optional(),isApp:ve(),isByoa:ve(),isRegistered:ve(),supportsDdp:ve(),icon:oe({id:X().nullable().optional(),originalSrc:X(),altText:X().nullable().optional()})}),fixedFee:tt.nullable().optional(),participantServices:qe(oe({name:X(),active:ve()})),percentageOfRateFee:Ue()})))})).nullable().optional(),rateProvider:oe({id:ze("DeliveryRateDefinition"),price:tt}).or(oe({id:ze("DeliveryParticipant"),adaptToNewServicesFlag:ve(),carrierService:oe({id:X(),name:X().nullable().optional(),label:X().nullable().optional(),formattedName:X().nullable().optional(),isApp:ve(),isByoa:ve(),isRegistered:ve(),supportsDdp:ve(),icon:oe({id:X().nullable().optional(),originalSrc:X(),altText:X().nullable().optional()})}),fixedFee:tt.nullable().optional(),participantServices:qe(oe({name:X(),active:ve()})),percentageOfRateFee:Ue()})),deletions:oe({rateDefinitionIds:qe(X())}).optional()});function ze(n){return X().refine(e=>ur(e)&&cr(e).toLowerCase()===n.toLowerCase(),{message:`Expected gid://Shopify/${n}`})}const Ir={assert(n){return{success:!0,data:n}}},lu={assert(n){if(!Array.isArray(n))return{success:!1,errors:[{path:[],code:"custom",message:"Expected an array"}]};const e=n.flatMap(r=>{const a=Ir.assert.call(this,r);return a.success?[]:"errors"in a?a.errors:a.error.issues});return e.length>0?{success:!1,errors:e}:{success:!0,data:n}}},du=ki([Ze.AmountOffProduct,Ze.AmountOffOrder,Ze.BuyXGetY,Ze.FreeShipping,Ze.App]).optional(),fu=de("Discount"),pu=X(),gu=de("Market"),hu=K(()=>new Ko({"number/integer":Wo,"shopify/Article+url":Xo,"shopify/Collection+url":Jo,"shopify/Customer+url":Yo,"shopify/Experiment+url":Zo,"shopify/Catalog+url":eu,"shopify/Menu+url":tu,"shopify/MetafieldDefinition+url":nu,"shopify/Metaobject+url":ru,"shopify/MetaobjectDefinition+url":au,"shopify/Page+url":iu,"shopify/Product+url":su,"shopify/ProductVariant+url":ou,"shopify/SegmentationTemplates+url":uu,"shopify/ShippingOption":cu,"shopify/Artifact":Ir,"shopify/Artifact-list":lu,"shopify/Discount+type":du,"shopify/Discount+url":fu,"text/plain":pu,"shopify/Market+url":gu})),mu=K(()=>{const n=U(void 0),e=U(void 0);return{get multiTrackToken(){return n.value},get sessionToken(){return e.value},updateState(r){n.value=r.multiTrackToken,e.value=r.sessionToken}}});function vu({errorLogger:n,router:e}){return e.nextMostLikelyRoutes().map(a=>{const i=a.manifestRouteId,{sliceName:u,pathPattern:l}=a;if(!l){n.notify(new Error(`Path pattern not found for route: ${i}`));return}if(!u){n.notify(new Error(`Slice name not found for route: ${i}`));return}return{id:i,pathPattern:yu(l),sliceName:u}}).filter(Boolean)}function yu(n){return n.startsWith("/")?n.replace(/^\/+/,"/"):`/${n}`}function _u({enabled:n,registerCleanup:e}){const r=U([]);let a="";if(Ri)return r;const i=new Set,u=new Set;let l=null;function f(){l||(l=setTimeout(h,50))}function h(){l&&clearTimeout(l),l=null;const A=n.peek()?document.querySelectorAll("a[href]"):[],S=new Set(Array.from(A).filter(E=>E.getAttribute("href")&&E.origin===location.origin));for(const E of S)i.has(E)||(i.add(E),v.observe(E));for(const E of i)S.has(E)||(i.delete(E),v.unobserve(E))}const v=new IntersectionObserver(A=>{A.forEach(T=>{const C=T.target,I=u.has(C);I&&T.isIntersecting||!I&&!T.isIntersecting||(T.isIntersecting?u.add(C):u.delete(C))});const S=Array.from(u),E=S.map(T=>T.href).join(`
`);a!==E&&(a=E,r.value=S.map(T=>({path:T.pathname+T.search+T.hash,element:T})))}),y=new MutationObserver(f);return e(Ke(()=>n.value?(y.observe(document.body,{childList:!0,subtree:!0}),h(),()=>{r.value.length&&(r.value=[]),i.clear(),u.clear(),v.disconnect(),y.disconnect()}):h())),r}function Su({router:n,items:e,priorityRoutes:r}){return Q(()=>r!=null&&r.value.length?r.value.map(a=>e.value.filter(i=>Oi(On(a.pathPattern),On(i.path))).map(i=>({...i,id:a.id,pathPattern:a.pathPattern,sliceName:a.sliceName,navigationId:n.navigationId}))).flat():[])}async function Eu(n,e,r,a){try{await n.prefetchLoader(e)}catch(i){if(i instanceof Response)return;if(i instanceof Di){console.warn(`[Warning][Prefetch] Mutation called during prefetch for path ${e}`);return}console.warn(`Error prefetching path ${e}`,i);const u=i instanceof Error?i.message:String(i);r.log("error",J.PrefetchError,{routedId:n.getRouteId(),prefetchRouteId:a,message:u})}}const bu=500;function Au({instrumentation:n,registerCleanup:e}){const r=U(!1);let a=null;if(typeof PerformanceObserver>"u")return r;function i(){r.value=!1,a&&clearTimeout(a),a=setTimeout(async()=>{await n.waitUntilIdle(),a=null,r.value=!0},bu)}const u=new PerformanceObserver(l=>{for(const f of l.getEntries())if(Iu(f))return i()});return u.observe({entryTypes:["resource"]}),i(),e(()=>{u.disconnect(),a&&clearTimeout(a)}),r}function wu(n){return n.entryType==="resource"}function Iu(n){return n.entryType==="layout-shift"?!0:!wu(n)||"deliveryType"in n&&n.deliveryType==="cache"?!1:n.initiatorType==="script"||n.name.includes("img")?!0:/\/api\/shopify.+type=query|\/queries/.test(n.name)}const Pu=3;function Tu({router:n,items:e,metrics:r,monorail:a,instrumentation:i,registerCleanup:u}){const l=Au({instrumentation:i,registerCleanup:u}),f=U(new Map),h=U(new Set),v=Q(()=>e.value.filter((p,_,P)=>P.findIndex(N=>N.path===p.path)===_)),y=Q(()=>Array.from(f.value.values()).filter(p=>p.stage==="queued").map(p=>p.item)),A=Q(()=>Array.from(f.value.values()).filter(p=>p.stage==="started").map(p=>p.item)),S=Q(()=>Array.from(f.value.values()).filter(p=>p.stage==="partial").map(p=>p.item)),E=Q(()=>A.value.length+S.value.length);function T(p){f.value=new Map(f.peek()).set(p.path,{stage:"started",item:p}),a.producePrefetchStart(p)}function C(p){const _=new Map(f.peek());_.delete(p.path),f.value=_,h.value=new Set(h.peek()).add(p.path),a.producePrefetchEnd(p)}u(Ke(()=>{const p=new Map(f.peek());let _=!1;for(const N of v.value)p.has(N.path)||h.peek().has(N.path)||(p.set(N.path,{stage:"queued",item:N}),a.producePrefetchQueued(N),_=!0);let P=!1;for(const[N,F]of f.peek().entries())F.stage==="queued"&&!v.peek().some(q=>q.path===N)&&p.delete(N)&&(P=!0);(_||P)&&(f.value=p)}));const I=Q(()=>{if(y.value.length!==0&&l.value&&!(E.value>=Pu))return y.value[0]});return u(Ke(()=>{async function p(_){var F;if(!l.value)return;const{path:P,id:N}=_;((F=f.peek().get(P))==null?void 0:F.stage)!=="started"&&(T(_),await Eu(n,P,r,N),C(_))}I.value&&p(I.value)})),u(Ke(()=>{const p=A.value.filter(P=>!v.value.find(N=>N.path===P.path));if(!p.length)return;const _=new Map(f.peek());p.forEach(P=>{_.set(P.path,{stage:"partial",item:P}),a.producePrefetchPartial(P)}),f.value=_})),{get queuedItems(){return y.value},get startedItems(){return A.value},get partialItems(){return S.value},get linksComplete(){return h.value}}}var Nt,Hn;function Lu(){if(Hn)return Nt;Hn=1;function n(e){for(var r=5381,a=e.length;a;)r=r*33^e.charCodeAt(--a);return r>>>0}return Nt=n,Nt}var Cu=Lu();const Nu=nr(Cu),nt="admin_navigation_prefetching/2.1",ku=10;function Ru({monorail:n,shop:e,requestDetails:r,serverData:a}){const i=a.sessionId,u=Nu(i)%100<ku,l=(S,E)=>{var N,F;const{path:T,id:C,pathPattern:I,sliceName:p,navigationId:_}=E,P=(N=r.staffMember)==null?void 0:N.userId;return{stage:S,stageCompletedAt:Date.now(),shopId:Number(e.shopId),shopUserId:P===void 0?void 0:Number(P),identityUuid:(F=a.identityUser)==null?void 0:F.sub,pageRequestId:_,nextPathname:T,nextManifestRouteId:C,nextSliceName:p,nextNormalizedPathname:I}};return{producePrefetchQueued:S=>{u&&n.produce({schemaId:nt,payload:l("queued",S)})},producePrefetchStart:S=>{u&&n.produce({schemaId:nt,payload:l("started",S)})},producePrefetchEnd:S=>{u&&n.produce({schemaId:nt,payload:l("ended",S)})},producePrefetchRequestNavigation:S=>{u&&n.produce({schemaId:nt,payload:l("requested",S)})},producePrefetchPartial:S=>{u&&n.produce({schemaId:nt,payload:l("partial",S)})}}}async function Ou(n){const{registerCleanup:e,ensure:r}=n,{router:a,metrics:i,performance:u,errorLogger:l,instrumentation:f,flags:h}=await r(["router","metrics","performance","errorLogger","instrumentation","requestDetails","flags"]),v=U(!1),y=h.get(Zn),A=Q(()=>y&&!v.value),S=Q(()=>A.value&&a.currentRoute&&vu({router:a,errorLogger:l})||[]),E=_u({enabled:A,registerCleanup:e}),T=Su({router:a,items:E,priorityRoutes:S}),C=Ru(n),I=u==null?void 0:u.on("inflightNavigation",()=>{v.value=!0}),p=u==null?void 0:u.on("navigation",()=>{v.value=!1}),_=Tu({router:a,items:T,monorail:C,metrics:i,instrumentation:f,registerCleanup:e}),P=Q(()=>_.queuedItems),N=Q(()=>_.startedItems),F=Q(()=>_.partialItems),q=Q(()=>_.linksComplete);function x(O){let V=O.target;for(;V;){if(V.localName==="a"){for(const W of T.value)if(W.element===V){C.producePrefetchRequestNavigation(W);return}}V=V.parentNode}}return addEventListener("click",x),e(()=>{removeEventListener("click",x),I==null||I(),p==null||p()}),{get queuedItems(){return P.value},get startedItems(){return N.value},get partialItems(){return F.value},get linksComplete(){return q.value},get priorityRoutes(){return S.value}}}const{createHttpProducer:Du,createLogProducer:Mu}=Mi,Pr=Du,Fu=Mu,zn="admin-web",Tr={detectInterceptedErrorEnabled:!0};function xu({debugMode:n=!1,production:e}={}){return e?Pr({production:e,options:Tr}):Fu({debugMode:n})}class ct extends Error{constructor(...r){var a;super(...r);G(this,"name","MonorailProduceError");(a=Error.captureStackTrace)==null||a.call(Error,this,ct)}excludeProduceFromStackTrace(r){var a;(a=Error.captureStackTrace)==null||a.call(Error,this,r)}}function kt(n,e,r,a){const i=xu(n),u=Pr({production:!0,options:Tr}),l=({schemaId:h,payload:v,noop:y})=>{if(y)return Promise.resolve({});const A={schemaId:h,metadata:{client:zn},payload:{...e||{},...(r==null?void 0:r())||{},...v}};let S=i;Qn.includes(h)&&!(n!=null&&n.production)&&!(n!=null&&n.debugMode)&&(S=u);const E=new ct;return E.excludeProduceFromStackTrace(l),S.produce(A).then(()=>{a==null||a("Monorail produce",{schemaId:h},"request")}).catch(T=>{a==null||a("Monorail produce",{error:!0,schemaId:h},"error"),jn(T,E,`${T.name}[${h}]`)})},f=({events:h})=>{const v=h.map(S=>({...S,metadata:{client:zn},payload:{...e||{},...(r==null?void 0:r())||{},...S.payload||{}}})),y=v.filter(({schemaId:S})=>Qn.includes(S)&&!(n!=null&&n.production)),A=new ct;return A.excludeProduceFromStackTrace(f),y.length>0?(n!=null&&n.debugMode&&i.produceBatch({events:v}),u.produceBatch({events:y}).catch(S=>{throw S.cause=A,S.name=`${S.name}[Batch]`,S})):i.produceBatch({events:v}).then(()=>{a==null||a("Monorail produce batch",{schemaIds:h.map(({schemaId:S})=>S)},"request")}).catch(S=>{a==null||a("Monorail produce batch",{error:!0,schemaIds:h.map(({schemaId:E})=>E)},"error"),jn(S,A,`${S.name}[Batch]`)})};return{produce:l,produceBatch:f}}function jn(n,e,r){if(!Fi(n))throw n.cause=e,n.name=r,n}const Qn=["dev_ui_tab_click/1.1","dev_ui_button_click/1.1","dev_ui_open/1.1","dev_ui_totally_click/1.0","dev_ui_drag/1.0"];function qu(n){const e=r=>{const a=r.target.closest("a");if(!a)return;const i=Uu(a);if(i)switch(i){case"admin_page_breadcrumbs_click/1.0":n.produce({schemaId:i,payload:{pageUrl:window.location.href}});break}};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}const Uu=n=>{var r;const e=n==null?void 0:n.getAttribute("data-tracking");if(e!=null&&e.startsWith("monorail:"))return(r=e.split(":"))==null?void 0:r.at(1)},$u=()=>(er(xi),qi);function Bu(n){var e;return((e=n.buildVersion)==null?void 0:e.split(".")[1])||"unknown"}function Vu({locale:n,requestDetails:e,currentOrganization:r,router:a,errorLogger:i,serverData:u}){var C,I;const{shopId:l,isShopifyEmployee:f,shopifyEmployeeId:h}=e.shop??{},v=((C=u.identityUser)==null?void 0:C.sub)??"unknownIdentityId",y=Bu(u),A={debugMode:$u(),production:Ui};if(r){const p={locale:n,organizationId:parseInt(r.id,10),tabId:qt(),sessionToken:u.sessionId,identityId:v,identityUuid:v,orgId:parseInt(r.id,10),referrer:document.referrer,appVersion:y,...T()};return kt(A,p,T,i.leaveBreadcrumb)}if(!l)return kt(A,{appVersion:y,...T()},T,i.leaveBreadcrumb);const S=parseInt(((I=e.staffMember)==null?void 0:I.userId)||"",10)||void 0,E={locale:n,shopId:parseInt(l,10),shopifyEmployee:f,shopifyEmployeeId:h,shopUserId:S,tabId:qt(),userId:S,sessionToken:u.sessionId,identityId:v,identityUuid:v,referrer:document.referrer,appVersion:y,...T()};function T(){return{manifestRouteId:a.getRouteInfo().manifestRouteId??"unknown",pageRequestId:a.navigationId,pageViewToken:a.pageViewToken,pathname:a.getRouteInfo().pathName??"unknownPathName",normalizedPathname:a.getRouteInfo().pathPattern??"unknownNormalizedPathname"}}return kt(A,E,T,i.leaveBreadcrumb)}const Gu=K(async({ensure:n,registerCleanup:e})=>{const r=await n(["locale","requestDetails","currentOrganization","router","errorLogger","serverData","currentOrganization"]),a=Vu(r),i=qu(a);return e(i),a});function Hu(n){return{token:n}}function zu(n){return{clientSessionToken:n,identitySessionId:null,checkoutToken:null,essentialCookieEncrypted:null,cartToken:null}}function ju(n){return{uuid:n}}function Vt(n){if(typeof n=="number"&&Kn(n.toString()))return{lowid:n.toString(),highid:null};if(typeof n=="string"){if(Kn(n))return{lowid:n,highid:null};if($i(n))return Qu(n)}return null}function Kn(n){if(!/^\d+$/.test(n))return!1;const e=BigInt(0),r=BigInt("18446744073709551615"),a=BigInt(n);return a>=e&&a<=r}function Qu(n){const e=Bi(n),r=new Uint8Array(e);let a=0n;for(let u=0;u<8;u++)a=a<<8n|BigInt(r[u]);let i=0n;for(let u=8;u<16;u++)i=i<<8n|BigInt(r[u]);return{lowid:i.toString(),highid:a.toString()}}let Rt=null;const Wn={adminWebSearchEvent:"createAdminWebSearchEvent",adminWebNavigationEvent:"createAdminWebNavigationEvent"};function Ku(n){return n?n.width>n.height?"SCREEN_ORIENTATION_LANDSCAPE":"SCREEN_ORIENTATION_PORTRAIT":"SCREEN_ORIENTATION_UNSPECIFIED"}function Wu({router:n},e){return e.Shopify.Event.Context.createClientContext({message:{createdAt:new Date().toISOString(),sentAt:null,id:Vt(crypto.randomUUID())},tokens:{pageViewToken:n.pageViewToken,tabToken:qt(),sessionToken:null,openId:null},browser:{referrer:document.referrer,href:window.location.href,screenWidth:screen.width,screenHeight:screen.height,screenOrientation:Ku(screen),windowInnerWidth:window.innerWidth,windowInnerHeight:window.innerHeight,windowScrollX:window.scrollX,windowScrollY:window.scrollY,documentTitle:document.title,documentBodyHeight:document.body.clientHeight,documentBodyWidth:document.body.clientWidth},native:{bundleIdentifier:null,screenName:null,screenOrientation:null,screenWidth:null,screenHeight:null,isForeground:null,buildVersionMajor:null,buildVersionMinor:null,buildVersionPatch:null,buildNumber:null,buildType:null,operatingSystem:null,operatingSystemVersion:null,obfuscatedOperatingSystemVersion:null,deviceManufacturer:null,deviceModel:null,webviewHref:null,locale:null,screenParams:null},admin:{manifestRouteHandle:n.getRouteInfo().manifestRouteId??null,webPageRequestId:n.navigationId,webNormalizedPathname:n.getRouteInfo().pathPattern??null,routeType:null}})}function Xu({requestDetails:n,serverData:e},r){var i,u;const a=e.identityUser.sub;return r.Shopify.Event.Context.createSourceUserContext({customer:null,multiTrack:Hu(ye.get("_shopify_y")??""),identityAccount:ju(a),shopAccount:null,shopPayUser:null,shopifyEmployee:{id:Vt(((i=n.shop)==null?void 0:i.shopifyEmployeeId)??null)},adminUser:{id:Vt(((u=n.staffMember)==null?void 0:u.userId)??null)},device:{uuid:ye.get("master_device_id")??null},deviceInstall:null})}function Ju({requestDetails:n},e){var r;return e.Shopify.Event.Context.createShopContext({id:{lowid:((r=n.shop)==null?void 0:r.shopId.toString())??null,highid:null}})}function Yu({currentOrganization:n},e){return e.Shopify.Event.Context.createOrganizationContext({id:{lowid:(n==null?void 0:n.id.toString())??null,highid:null}})}function Zu(n){function e(i,u,l){const f=i.createEnvelope({id:null,eventClass:"EVENT_CLASS_UNSPECIFIED",severity:"EVENT_SEVERITY_UNSPECIFIED",source:"EVENT_APP_UNSPECIFIED",traceContext:null,origin:null,botDetection:null,client:Wu(n,i),edge:null,shop:Ju(n,i),organization:Yu(n,i),user:Xu(n,i),userConsents:null,eventCustody:null,enrichment:null,session:zu(ye.get("_shopify_s")??""),apiClient:null,tags:null,server:null,governance:null},l);return u.produceEvent(f),f}function r(i){return async u=>{const{flags:l}=await n.ensure(["flags","requestDetails","serverData","currentOrganization","locale","router","errorLogger"]);if(!l.get(Vi))return!0;const{Proto:f,SimpleProtoClient:h}=await ue(async()=>{const{Proto:A,SimpleProtoClient:S}=await import("../index-DDUYLZYP5XGH.js");return{Proto:A,SimpleProtoClient:S}},[]);Rt||(Rt=new h({endpoint:"development"}));const v=f[i],y=v(u);return e(f,Rt,y),!0}}const a={adminWebSearchEvent:r(Wn.adminWebSearchEvent),adminWebNavigationEvent:r(Wn.adminWebNavigationEvent)};return Object.entries(a).reduce((i,[u,l])=>(i[u]=async f=>{try{return await l(f),!0}catch{return!1}},i),{})}const ec=K(n=>Zu(n)),tc=K(async({ensure:n,graphqlLite:e})=>{const{requestDetails:r}=await n(["requestDetails"]),a=r.shop,i=lr(ut(location.pathname))||dr(ut(location.pathname));return Object.defineProperty(a,"refetch",{value:async()=>{const u=await fr(e,i);Object.assign(a,u.shop);const{router:l}=await n(["router"]);l.revalidate()},enumerable:!1,configurable:!1,writable:!1}),a}),nc=K(async({ensure:n,unified:e})=>{const{flags:r,shop:a}=await n(["flags","shop"]);return{get permanentHandle(){return r.get(Dn)?a.permanentHandle:e.storeHandle},get publicHandle(){return r.get(Dn)?a.brandedHandle||a.permanentHandle:e.storeHandle}}}),Xn="en";async function rc({createRouterPromise:n}){var E,T,C,I;const e=Gi(),{hostname:r=location.hostname,webHost:a,coreCdnHost:i,coreHost:u,adminDomain:l,devDashHost:f,sidekickHost:h,sidekickPublicHost:v}=e.urlDetails??{},y=lr(ut(location.pathname))||dr(ut(location.pathname)),A=Hi({currentOrganization(){const p=ns(location.pathname);return p?{id:p}:void 0},mimeTypes:hu,mobileBridge:Xi,async extensibility(p){return ue(()=>import("../context-slice-extensibility-CxSUM1o4um0q.js"),__vite__mapDeps([3,1,2])).then(_=>_.default(p))},intents:zo,activities:Qo,url:new Wi(r,a,i,u,l,f,h,v),browser:new ar({userAgent:((E=e==null?void 0:e.browser)==null?void 0:E.userAgent)??navigator.userAgent,supported:((T=e==null?void 0:e.browser)==null?void 0:T.supported)??!0}),locale:e.locale,async i18n({locale:p,currentOrganization:_,ensure:P}){if(_){const{errorLogger:V}=await P(["errorLogger"]);return new Mn({fallbackLocale:Xn,locale:p,onError:V.notify})}const{requestDetails:N,errorLogger:F}=await P(["requestDetails","errorLogger"]),{currencyCode:q,shopCountryCode:x,ianaTimezone:O}=N.shop;return new Mn({fallbackLocale:Xn,locale:p,currency:q,country:x,timezone:O,onError:F.notify})},async router(p){const{default:_}=await ue(async()=>{const{default:P}=await import("../router-Do4zJJAEDTya.js").then(N=>N.eK);return{default:P}},__vite__mapDeps([4,1,2,5]));return _(p,n)},serverData:e,errorLogger:vo,urlDetails:e.urlDetails,performance:cs,instrumentation:ms,flash:vs,loading:Ls,globallyDismissedHomeItems:Cs,statusPanel:Rs,unified(){return{storeHandle:ts(location.pathname)}},graphqlLite:Ts,async graphql(p){return await p.ensure(["router","metrics"]),(await ue(async()=>{const{default:_}=await import("../context-slice-graphql-DK0M30gM-m3r.js").then(P=>P.a5);return{default:_}},__vite__mapDeps([0,1,2]))).default(p,{initialApolloData:e.initialApolloData})},async atlas(p){return p.ensure(["graphql"]),(await ue(async()=>{const{default:_}=await import("../context-slice-atlas-D7ri7RsvNajt.js");return{default:_}},__vite__mapDeps([6,1,2]))).default(p)},contractManagementGraphql({graphql:p,shop:_,shopHandle:P}){return p.subclient({name:"contractManagement",apiEndpointPath:`/api/contractmanagement/${P.permanentHandle}/${_.shopId}`})},verificationHubGraphql({graphql:p,shopHandle:_}){return p.subclient({name:"verificationHub",apiEndpointPath:`/api/verificationhub/${_.permanentHandle}/`})},async organizationGraphql({ensure:p}){const{currentOrganization:_,graphql:P,shop:N,shopHandle:F}=await p(["currentOrganization","graphql","shop","shopHandle"]);return _?P.subclient({name:"orgScopedOrganizations",apiEndpointPath:`/api/org_scoped_organizations/org/${_.id}`,handleServerError(q){var O;if(!q)return!1;const x=q.statusCode||((O=q.response)==null?void 0:O.status);return[403,404].includes(x)}}):P.subclient({name:"organizations",apiEndpointPath:`/api/organizations/${F.permanentHandle}/${N.shopId}`})},async signupOrganizationsGraphql({ensure:p}){const{graphql:_,metrics:P}=await p(["graphql","metrics"]);return _.subclient({name:"organizations",apiEndpointPath:"/api/destinations",timeout:1e3,onOperation(N){var q;N.errorResponse instanceof Error&&((q=N.errorResponse.message)==null?void 0:q.startsWith("Timeout exceeded"))&&P.record(J.SignupOrganizationsGraphqlTimeout,1)}})},async requestedActionsGraphql({ensure:p}){const{graphql:_}=await p(["graphql"]);return _.subclient({name:"requestedActions",apiEndpointPath:"/api/requested_actions"})},bankingGraphql({serverData:p,shopHandle:_,graphql:P}){const N="/admin/banking/graphql",F="/admin/internal/web/graphql/banking",q=p.isUnifiedApp;let x=F;return P.options.server?x=N:q&&(x=`/api/banking/${_.permanentHandle}`),P.subclient({apiEndpointPath:x,name:"banking",defaultOptions:{query:{errorPolicy:"all",ssr:!1}},handleServerError(O){var ne,Z,fe,ae;if(!O)return!1;const V=(O==null?void 0:O.statusCode)||((ne=O==null?void 0:O.response)==null?void 0:ne.status),W=((Z=O==null?void 0:O.result)==null?void 0:Z.error)||((ae=(fe=O==null?void 0:O.result)==null?void 0:fe.errors)==null?void 0:ae.toString())||"";return V===404||V===403&&W!=="CSRF"}})},async experimentalBillingGraphql({ensure:p}){const{shop:_,shopHandle:P,graphql:N}=await p(["shop","shopHandle","graphql"]);return N.subclient({name:"billing",apiEndpointPath:`/api/billing/shop/${_.shopId}/graphql?shop=${P.permanentHandle}`})},async appStoreGraphql({ensure:p}){const{graphql:_}=await p(["graphql"]);return _.subclient({name:"appStore",apiEndpointPath:"/api/appStore/graphql"})},async merchantBankAccountGraphql({serverData:p,ensure:_}){const{shop:P,graphql:N}=await _(["shop","graphql"]),F=P==null?void 0:P.shopId,x=new URLSearchParams(location.search).get("businessEntityId"),O="/admin/merchant_bank_account/graphql",V="/admin/internal/web/graphql/merchant_bank_account",W=p.isUnifiedApp;let ne=V;return N.options.server?ne=O:W&&(ne=x?`/api/merchant_bank_account/${F}/business_entity/${x}`:`/api/merchant_bank_account/${F}`),N.subclient({apiEndpointPath:ne,name:"merchantBankAccount",defaultOptions:{query:{errorPolicy:"all",ssr:!1}},handleServerError(Z){if(!Z)return!1;const fe=Z.result.error||Z.message||Z.response.statusText;return Z.statusCode===es.BadRequest&&fe.includes("IMPERSONATION")?!1:[403,404].includes(Z.statusCode)}})},async merchantRiskGraphql({serverData:p,ensure:_}){const P="/admin/profile_assessment/graphql",N="/admin/internal/web/graphql/profile_assessment",{graphql:F,shopHandle:q}=await _(["graphql","shopHandle"]),x=p.isUnifiedApp;let O=N;return F.options.server?O=P:x&&(O=`/api/profile_assessment/${q.permanentHandle}`),F.subclient({apiEndpointPath:O,name:"merchantRisk",defaultOptions:{query:{errorPolicy:"all",ssr:!1}},handleServerError(V){return V?[403,404].includes(V.statusCode):!1}})},async bourgeoisGraphql({serverData:p,ensure:_}){const P=(await ue(async()=>{const{default:W}=await import("../context-slice-bourgeois-schema-types-CzuH39VAMf00.js");return{default:W}},[])).default,N="/admin/capital/graphql",F="/admin/internal/web/graphql/capital",q=p.isUnifiedApp;let x=F;const{graphql:O,shopHandle:V}=await _(["graphql","shopHandle"]);return O.options.server?x=N:q&&(x=`/api/capital/${V.permanentHandle}`),O.subclient({apiEndpointPath:x,name:"bourgeois",defaultOptions:{query:{errorPolicy:"all",ssr:!1}},handleServerError(W){return W?[403,404].includes(W.statusCode):!1}},P)},headlessGraphql({serverData:p,graphql:_,shopHandle:P}){const N="/admin/headless_storefronts/graphql",F="/admin/internal/web/graphql/headless_storefronts",q=p.isUnifiedApp;let x=F;return _.options.server?x=N:q&&(x=`/api/headless_storefronts/${P.permanentHandle}`),_.subclient({apiEndpointPath:x,name:"headlessStorefronts",defaultOptions:{query:{errorPolicy:"all",ssr:!1}},handleServerError(O){return O?[403,404].includes(O.statusCode):!1}})},hydrogenGraphql({serverData:p,graphql:_,shopHandle:P}){const N="hydrogen_storefronts",F=`/admin/${N}/graphql`,q=`/admin/internal/web/graphql/${N}`,x=p.isUnifiedApp;let O=q;return _.options.server?O=F:x&&(O=`/api/${N}/${P.permanentHandle}`),_.subclient({apiEndpointPath:O,name:"hydrogenStorefronts",defaultOptions:{query:{errorPolicy:"all",ssr:!1}},cacheConfig:{typePolicies:{Query:{fields:{oxygenFeatureSet:{merge:!0}}}}},handleServerError(V){return V?[403,404].includes(V.statusCode):!1}})},signupGraphQL({graphql:p}){return p.subclient({name:"coreSignups",apiEndpointPath:"/api/signups"})},optionalCheckoutGraphQL({graphql:p}){const _=Zi(location.search);return p.subclient({name:"coreSignupQuestionnaire",apiEndpointPath:`/api/shopify/${_}`})},messagingApiGraphql({serverData:p,graphql:_,shopHandle:P}){const N="messagingapi",F=`/admin/${N}/graphql`,q="/admin/internal/web/graphql/messaging_api",x=p.isUnifiedApp;let O=q;return _.options.server?O=F:x&&(O=`/api/${N}/${P.permanentHandle}`),_.subclient({apiEndpointPath:O,name:"messagingApi",defaultOptions:{query:{errorPolicy:"all",ssr:!1}},handleServerError(V){return V?[402,403,404].includes(V.statusCode):!1}})},flags:Ao,shop:tc,shopHandle:nc,async shopFeatures({ensure:p,currentOrganization:_}){if(_){const{organizationFlags:N}=await p(["organizationFlags"]);return{rbacEnabled:N.includes(Yi),hasOrgSettings:!0,centralLegalEntitiesEnabled:N.includes(Ji)}}const{requestDetails:P}=await p(["requestDetails"]);return P.shopFeatures},entitlements:$o,async requestDetails({serverData:p,unified:_,graphqlLite:P,currentOrganization:N}){return p.requestDetails?p.requestDetails:!_.storeHandle||N?{shop:{}}:await fr(P,y)},permissions:wo,reportify:Ki,async newReportify(p){return(await ue(async()=>{const{default:_}=await import("../context-slice-newReportify-mLZLEwvbKmHv.js");return{default:_}},__vite__mapDeps([7,1,2]))).default(p)},async metrics(p){return(await ue(async()=>{const{default:_}=await import("../context-slice-metrics-bIURNZ-g2jup.js").then(P=>P.m);return{default:_}},__vite__mapDeps([8,1,2,0]))).default(p)},async manifestFetch(p){return(await ue(async()=>{const{default:_}=await import("../context-slice-manifestFetch-DadUzXsMT7kh.js");return{default:_}},__vite__mapDeps([9,1,2]))).default(p)},monorail:Gu,observability:ec,slots:Qi,universalSidebar:Ds,searchEval:Io,organization:To,async organizationFeatures({ensure:p}){const{organization:_}=await p(["organization"]);return(_==null?void 0:_.features)||[]},async organizationPermissions({ensure:p}){const{organization:_}=await p(["organization"]);return(_==null?void 0:_.permissions)||[]},async organizationUserLimits({ensure:p}){const{organization:_}=await p(["organization"]);return(_==null?void 0:_.userLimits)||Ar},organizationFlags:Do,contextualCommerce:ko,assets:qo,forms:Uo,trustChallenge:Vo,duxContext:mu,logout:Go,prefetch:Ou,async sidekick(p){return p.currentOrganization?(await ue(async()=>{const{noopSidekickContext:_}=await import("../context-slice-sidekick~index-GICUqrVg606C.js").then(P=>P.a2);return{noopSidekickContext:_}},__vite__mapDeps([10,1,2,4,5,0]))).noopSidekickContext:(await p.ensure(["router","universalSidebar","shopFeatures","metrics","flags","errorLogger"]),(await ue(async()=>{const{default:_}=await import("../context-slice-sidekick~index-GICUqrVg606C.js").then(P=>P.a2);return{default:_}},__vite__mapDeps([10,1,2,4,5,0]))).default(p))}});return await A.ensure(zi),(e.isShopifyStaff||((I=(C=e.identityUser)==null?void 0:C.email)==null?void 0:I.endsWith("@shopify.com")))&&Object.defineProperty(self,ji,{configurable:!0,writable:!0,value:A}),A}const Qe=rs();let Ot;ic().then(()=>{Qe.status?Lr():ac({createAdminContext:rc})});async function ac({createAdminContext:n}){const e=ue(()=>import("../router-Do4zJJAEDTya.js").then(f=>f.eL),__vite__mapDeps([4,1,2,5])),r=pr(Qe.locale),a=ue(()=>import("../render-common-hx9BPWdZF4r4.js").then(f=>f.oC),__vite__mapDeps([11,1,2,4,5,0,8,10,12]));let i,u;try{u=await n({createRouterPromise:e.then(({createRouter:f})=>f)})}catch(f){i=f}if(i){i&&setTimeout(()=>{throw i}),Lr(i);return}const[{createAppRoot:l}]=await Promise.all([a,r]);if(!Ot)try{Ot=l(Cr())}catch(f){throw new Error("Cannot create app root",{cause:f})}Ot.render(u,Qe==null?void 0:Qe.isUnifiedApp)}async function Lr(n){const[{createErrorAppRoot:e}]=await Promise.all([ue(()=>import("../render-common-hx9BPWdZF4r4.js").then(r=>r.oC),__vite__mapDeps([11,1,2,4,5,0,8,10,12])),pr(Qe.locale)]);e(Cr(),n).render()}function ic(){return new Promise(n=>{document.readyState==="complete"?n():document.addEventListener("readystatechange",e);function e(){document.readyState==="complete"&&(document.removeEventListener("readystatechange",e),n())}})}function Cr(){const n=document.getElementById("app");if(!n)throw new Error("App element not found");return n}
